(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[641],{4852:function(e,t,i){Promise.resolve().then(i.bind(i,9794))},9794:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return y}});var a=i(7437),s=i(2265),o=i(5674),r=i(9376),n=i(1964);let l=["#e74c3c","#3498db","#2ecc71","#f39c12","#9b59b6","#1abc9c","#34495e"],c={width:"100%",height:"100%"};function d(e){let{days:t}=e,[i,r]=(0,s.useState)(null),[d,m]=(0,s.useState)(null),[g,u]=(0,s.useState)(null),[h,x]=(0,s.useState)(!1),[p,f]=(0,s.useState)(null);(0,s.useRef)(null);let[y,v]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{var e;if(null===(e=window.google)||void 0===e?void 0:e.maps){x(!0),v(window.google);return}let t=await fetch("/api/google-maps");if(!t.ok)throw Error("Failed to fetch Google Maps URL: ".concat(t.statusText));let i=await t.json();if(!i.url)throw Error("Google Maps URL not returned from server");let a=document.createElement("script");return a.src=i.url,a.async=!0,a.defer=!0,a.id="google-maps-script",a.onload=()=>{x(!0),v(window.google)},a.onerror=e=>{f(Error("Failed to load Google Maps script"))},document.head.appendChild(a),()=>{let e=document.getElementById("google-maps-script");e&&e.remove()}}catch(e){console.error("Error loading Google Maps:",e),f(e instanceof Error?e:Error("Unknown error loading Google Maps")),u("Failed to load Google Maps. Please try again later.")}})()},[]);let b=t.flatMap(e=>e.activities),j=(0,s.useCallback)(()=>{if(0===b.length)return{lat:39.8283,lng:-98.5795};let e=b.filter(e=>e&&e.coordinates&&"object"==typeof e.coordinates&&void 0!==e.coordinates.lat&&void 0!==e.coordinates.lng&&!isNaN(Number(e.coordinates.lat))&&!isNaN(Number(e.coordinates.lng))&&isFinite(Number(e.coordinates.lat))&&isFinite(Number(e.coordinates.lng)));if(0===e.length)return{lat:39.8283,lng:-98.5795};let t=e.reduce((e,t)=>e+Number(t.coordinates.lat),0),i=e.reduce((e,t)=>e+Number(t.coordinates.lng),0);return{lat:t/e.length,lng:i/e.length}},[b]),N=(0,s.useCallback)(e=>{m(e);let t=b.filter(e=>e&&e.coordinates&&"object"==typeof e.coordinates&&void 0!==e.coordinates.lat&&void 0!==e.coordinates.lng&&!isNaN(Number(e.coordinates.lat))&&!isNaN(Number(e.coordinates.lng))&&isFinite(Number(e.coordinates.lat))&&isFinite(Number(e.coordinates.lng)));if(t.length>0){let i=new y.maps.LatLngBounds;t.forEach(e=>{i.extend({lat:Number(e.coordinates.lat),lng:Number(e.coordinates.lng)})}),e.fitBounds(i),1===t.length&&e.setZoom(14)}},[b]),w=(0,s.useCallback)(()=>{m(null)},[]),C=(e,t)=>{if(!y)return;let i=l[e%l.length];return{url:"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent('\n      <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 40 40">\n        <g transform="translate(20,20)">\n          <circle r="16" fill="'.concat(i,'" />\n          <text x="0" y="5" text-anchor="middle" fill="white" font-size="14px" font-weight="bold" font-family="Arial">').concat(t+1,'</text>\n          <circle cx="10" cy="10" r="8" fill="white" stroke="#ccc" />\n          <text x="10" y="13" text-anchor="middle" fill="#333" font-size="8px" font-weight="bold" font-family="Arial">').concat(e+1,"</text>\n        </g>\n      </svg>\n    ")),scaledSize:new y.maps.Size(40,40),origin:new y.maps.Point(0,0),anchor:new y.maps.Point(20,20)}},k=e=>{try{return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch(t){return e}};return p?(0,a.jsx)("div",{className:"relative w-full h-[400px] rounded-lg overflow-hidden shadow-md bg-gray-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)("div",{className:"text-red-500 mb-2",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Google Maps Error"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Failed to load Google Maps API. This could be due to:"}),(0,a.jsxs)("ul",{className:"text-sm text-left list-disc pl-8 mt-2 text-gray-700",children:[(0,a.jsx)("li",{children:"Server-side Google Maps API key configuration issue"}),(0,a.jsx)("li",{children:"API key restrictions not allowing this domain"}),(0,a.jsx)("li",{children:"Maps JavaScript API not enabled for this API key"}),(0,a.jsx)("li",{children:"Billing not enabled in Google Cloud Console"})]}),(0,a.jsxs)("div",{className:"mt-4 bg-gray-200 p-3 rounded text-xs text-gray-700 text-left",children:[(0,a.jsx)("p",{className:"font-semibold",children:"For Administrators:"}),(0,a.jsxs)("ol",{className:"list-decimal pl-5 mt-1 space-y-1",children:[(0,a.jsx)("li",{children:"Verify the GOOGLE_MAPS_API_KEY environment variable is set on the server"}),(0,a.jsx)("li",{children:'Check that the API key\'s "Application restrictions" in Google Cloud Console include this domain'}),(0,a.jsx)("li",{children:'Ensure the "API restrictions" include "Maps JavaScript API"'}),(0,a.jsx)("li",{children:"Visit the Google Cloud Console to enable billing"})]})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-4 bg-gray-100 p-2 rounded overflow-auto",children:["Error details: ",p.message]})]})}):h?g?(0,a.jsx)("div",{className:"relative w-full h-[400px] rounded-lg overflow-hidden shadow-md bg-gray-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)("div",{className:"text-red-500 mb-2",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Map Error"}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:g}),(0,a.jsxs)("div",{className:"mt-3 text-xs text-gray-500 bg-gray-100 p-2 rounded",children:[(0,a.jsxs)("p",{children:["Current domain: ",(0,a.jsx)("span",{className:"font-mono",children:window.location.hostname})]}),(0,a.jsx)("p",{className:"mt-1",children:"Make sure this domain is allowed in your Google Cloud Console API key restrictions."})]})]})}):(0,a.jsxs)("div",{className:"relative w-full h-[500px] rounded-lg overflow-hidden shadow-md",children:[(0,a.jsxs)(n.b6,{mapContainerStyle:c,center:j(),zoom:10,onLoad:N,onUnmount:w,options:{mapTypeControl:!0,streetViewControl:!0,fullscreenControl:!0},children:[t.map((e,t)=>{let i=l[t%l.length];console.log("Day ".concat(t," activities count:"),e.activities?e.activities.length:0),e.activities&&e.activities.length>0&&console.log("Day ".concat(t," first activity:"),{title:e.activities[0].title,hasCoordinates:!!e.activities[0].coordinates,coordinatesType:e.activities[0].coordinates?typeof e.activities[0].coordinates:"none",coordinatesContent:e.activities[0].coordinates?JSON.stringify(e.activities[0].coordinates):"none"});let s=e.activities.filter(e=>e&&e.coordinates&&"object"==typeof e.coordinates&&void 0!==e.coordinates.lat&&void 0!==e.coordinates.lng&&!isNaN(Number(e.coordinates.lat))&&!isNaN(Number(e.coordinates.lng))&&isFinite(Number(e.coordinates.lat))&&isFinite(Number(e.coordinates.lng)));return console.log("Day ".concat(t," valid activities with coordinates:"),s.length),(0,a.jsxs)("div",{children:[s.map((e,i)=>(0,a.jsx)(n.Jx,{position:{lat:Number(e.coordinates.lat),lng:Number(e.coordinates.lng)},icon:C(t,i),onClick:()=>r(e)},e.id)),s.length>=2&&(0,a.jsx)(n.aH,{path:s.map(e=>({lat:Number(e.coordinates.lat),lng:Number(e.coordinates.lng)})),options:{strokeColor:i,strokeOpacity:.8,strokeWeight:3}})]},e.date)}),i&&(0,a.jsx)(n.nx,{position:{lat:Number(i.coordinates.lat),lng:Number(i.coordinates.lng)},onCloseClick:()=>r(null),children:(0,a.jsxs)("div",{className:"p-2 max-w-xs",children:[(0,a.jsx)("h3",{className:"font-bold text-gray-800 mb-1",children:i.title}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:i.time}),(0,a.jsx)("p",{className:"text-sm mb-2",children:i.description}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,a.jsx)(o.Nh4,{className:"inline-block mr-1",size:12}),i.location]}),(0,a.jsxs)("p",{className:"text-sm font-medium text-right mt-2",children:["Cost: $",i.cost]})]})})]}),t.length>0&&(0,a.jsxs)("div",{className:"absolute bottom-4 left-4 bg-white p-2 rounded-md shadow-md z-10",children:[(0,a.jsx)("p",{className:"font-medium text-sm mb-1",children:"Days:"}),(0,a.jsx)("div",{className:"space-y-1",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full",style:{backgroundColor:l[t%l.length]}}),(0,a.jsxs)("span",{className:"text-xs",children:["Day ",t+1,": ",k(e.date)]})]},e.date))})]})]}):(0,a.jsx)("div",{className:"relative w-full h-[400px] rounded-lg overflow-hidden shadow-md bg-gray-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center p-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading map..."})]})})}function m(e){let{days:t,budget:i={}}=e,[r,n]=(0,s.useState)("calendar");return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,a.jsxs)("nav",{className:"flex space-x-8",children:[(0,a.jsxs)("button",{className:"border-b-2 px-1 py-4 font-medium flex items-center ".concat("calendar"===r?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>n("calendar"),children:[(0,a.jsx)(o.IiJ,{className:"mr-2"}),"Calendar View"]}),(0,a.jsxs)("button",{className:"border-b-2 px-1 py-4 font-medium flex items-center ".concat("map"===r?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>n("map"),children:[(0,a.jsx)(o.rB_,{className:"mr-2"}),"Map View"]}),(0,a.jsxs)("button",{className:"border-b-2 px-1 py-4 font-medium flex items-center ".concat("budget"===r?"border-primary text-primary":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),onClick:()=>n("budget"),children:[(0,a.jsx)(o.OZg,{className:"mr-2"}),"Budget"]})]})}),"calendar"===r&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Your Itinerary"}),(0,a.jsx)(g,{days:t})]}),"map"===r&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Map Overview"}),(0,a.jsx)(d,{days:t})]}),"budget"===r&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Budget Breakdown"}),(0,a.jsx)(h,{budget:i})]})]})}function g(e){let{days:t}=e;return(0,a.jsx)("div",{className:"space-y-6",children:t.map((e,t)=>(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,a.jsx)("div",{className:"bg-primary text-white p-4",children:(0,a.jsxs)("h3",{className:"font-bold text-lg",children:["Day ",t+1,": ",new Date(e.date).toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})]})}),(0,a.jsx)("div",{className:"divide-y",children:e.activities.map(e=>(0,a.jsx)(u,{activity:e},e.id))})]},e.date))})}function u(e){let{activity:t}=e;return(0,a.jsxs)("div",{className:"p-4 hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("p",{className:"font-medium text-gray-500",children:t.time}),(0,a.jsxs)("p",{className:"text-primary",children:["$",t.cost]})]}),(0,a.jsx)("h4",{className:"font-bold mb-1",children:t.title}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:t.description}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 flex items-center",children:[(0,a.jsx)("span",{className:"mr-1",children:"\uD83D\uDCCD"})," ",t.location]}),(0,a.jsx)("div",{className:"mt-2 flex justify-end",children:(0,a.jsx)("button",{className:"text-sm text-primary hover:text-accent",children:"Change this activity"})})]})}function h(e){let{budget:t}=e,i=(null==t?void 0:t.total)||0,s=(null==t?void 0:t.accommodation)||0,o=(null==t?void 0:t.food)||0,r=(null==t?void 0:t.activities)||0,n=(null==t?void 0:t.transport)||0,l=i||s+o+r+n;return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("p",{className:"text-3xl font-bold text-primary",children:["$",l]}),(0,a.jsx)("p",{className:"text-gray-500",children:"Total trip budget"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center pb-2 border-b",children:[(0,a.jsx)("p",{className:"font-medium",children:"Category"}),(0,a.jsx)("p",{className:"font-medium",children:"Amount"})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,a.jsx)("span",{children:"Accommodation"})]}),(0,a.jsxs)("p",{children:["$",s]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,a.jsx)("span",{children:"Food"})]}),(0,a.jsxs)("p",{children:["$",o]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),(0,a.jsx)("span",{children:"Activities"})]}),(0,a.jsxs)("p",{children:["$",r]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("p",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,a.jsx)("span",{children:"Transport"})]}),(0,a.jsxs)("p",{children:["$",n]})]})]}),(0,a.jsxs)("div",{className:"mt-8 pt-4 border-t",children:[(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"Budget distribution"}),(0,a.jsxs)("div",{className:"w-full h-4 rounded-full overflow-hidden flex",children:[(0,a.jsx)("div",{className:"h-full bg-blue-500",style:{width:"".concat(l>0?s/l*100:0,"%")}}),(0,a.jsx)("div",{className:"h-full bg-green-500",style:{width:"".concat(l>0?o/l*100:0,"%")}}),(0,a.jsx)("div",{className:"h-full bg-yellow-500",style:{width:"".concat(l>0?r/l*100:0,"%")}}),(0,a.jsx)("div",{className:"h-full bg-red-500",style:{width:"".concat(l>0?n/l*100:0,"%")}})]})]})]})}function x(e){let{destination:t,startDate:i,endDate:r}=e,[n,l]=(0,s.useState)("all"),c=[{id:"skyscanner",name:"Skyscanner",type:"flight",url:"https://www.skyscanner.com/transport/flights/nyc/".concat(t.substring(0,3),"/").concat(i,"/").concat(r,"/"),icon:(0,a.jsx)(o.NqP,{})},{id:"kayak",name:"Kayak",type:"flight",url:"https://www.kayak.com/flights/NYC-".concat(t.substring(0,3),"/").concat(i,"/").concat(r),icon:(0,a.jsx)(o.NqP,{})},{id:"booking",name:"Booking.com",type:"hotel",url:"https://www.booking.com/searchresults.html?ss=".concat(encodeURIComponent(t),"&checkin=").concat(i,"&checkout=").concat(r),icon:(0,a.jsx)(o.f0S,{})},{id:"airbnb",name:"Airbnb",type:"hotel",url:"https://www.airbnb.com/s/".concat(encodeURIComponent(t),"/homes?checkin=").concat(i,"&checkout=").concat(r),icon:(0,a.jsx)(o.f0S,{})},{id:"viator",name:"Viator",type:"experience",url:"https://www.viator.com/searchResults/all?text=".concat(encodeURIComponent(t)),icon:(0,a.jsx)(o.jst,{})},{id:"getYourGuide",name:"GetYourGuide",type:"experience",url:"https://www.getyourguide.com/-l".concat(encodeURIComponent(t),"/"),icon:(0,a.jsx)(o.jst,{})}],d="all"===n?c:c.filter(e=>e.type===n);return(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Book Your Trip"}),(0,a.jsxs)("div",{className:"flex gap-2 mb-6 flex-wrap",children:[(0,a.jsxs)("button",{onClick:()=>l("all"),className:"px-4 py-2 rounded-full text-sm flex items-center gap-1 ".concat("all"===n?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200"),children:[(0,a.jsx)(o.LCi,{})," All"]}),(0,a.jsxs)("button",{onClick:()=>l("flight"),className:"px-4 py-2 rounded-full text-sm flex items-center gap-1 ".concat("flight"===n?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200"),children:[(0,a.jsx)(o.NqP,{})," Flights"]}),(0,a.jsxs)("button",{onClick:()=>l("hotel"),className:"px-4 py-2 rounded-full text-sm flex items-center gap-1 ".concat("hotel"===n?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200"),children:[(0,a.jsx)(o.f0S,{})," Accommodation"]}),(0,a.jsxs)("button",{onClick:()=>l("experience"),className:"px-4 py-2 rounded-full text-sm flex items-center gap-1 ".concat("experience"===n?"bg-primary text-white":"bg-gray-100 hover:bg-gray-200"),children:[(0,a.jsx)(o.jst,{})," Experiences"]})]}),(0,a.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(e=>(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"border p-4 rounded-lg hover:shadow-md transition-shadow flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"text-primary text-xl",children:e.icon}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["flight"===e.type&&"Book flights","hotel"===e.type&&"Find accommodation","experience"===e.type&&"Discover activities"]})]})]}),(0,a.jsx)(o.CkN,{className:"text-gray-400"})]},e.id))}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-6",children:"Note: We are not affiliated with any of these booking services. Links open in a new tab."})]})}function p(e){if(!e||!e.days||!Array.isArray(e.days))return e;console.log("Validating itinerary data structure...");let t=0;if(e.budget&&"object"==typeof e.budget){let i=0;if(void 0===e.budget.accommodation&&(console.log("Missing budget.accommodation, defaulting to 0"),e.budget.accommodation=0,t++),void 0===e.budget.food&&(console.log("Missing budget.food, defaulting to 0"),e.budget.food=0,t++),void 0===e.budget.transport&&(console.log("Missing budget.transport, defaulting to 0"),e.budget.transport=0,t++),void 0===e.budget.activities){for(let t of(console.log("Missing budget.activities, calculating from activity costs"),e.days))if(t.activities&&Array.isArray(t.activities))for(let e of t.activities)e&&"number"==typeof e.cost&&(i+=e.cost);e.budget.activities=i,t++}let a=e.budget.accommodation+e.budget.food+e.budget.activities+e.budget.transport;(void 0===e.budget.total||e.budget.total!==a)&&(console.log("".concat(void 0===e.budget.total?"Missing":"Incorrect"," budget.total, updating to calculated total: ").concat(a)),e.budget.total=a,t++)}else console.log("Missing budget object, creating default budget"),e.budget={accommodation:0,food:0,activities:0,transport:0,total:0},t++;for(let i of e.days){if(!i.activities||!Array.isArray(i.activities)){i.activities=[];continue}for(let e of i.activities)if(e&&"object"==typeof e){if(e.coordinates&&"object"==typeof e.coordinates){let i=!1;"number"!=typeof e.coordinates.lat&&void 0!==e.coordinates.lat?(console.log('Converting lat coordinate for activity "'.concat(e.title,'" from ').concat(typeof e.coordinates.lat," to number")),e.coordinates.lat=parseFloat(String(e.coordinates.lat))||40.7128,i=!0,t++):void 0===e.coordinates.lat&&(console.log('Missing lat coordinate for activity "'.concat(e.title,'", adding default')),e.coordinates.lat=40.7128,i=!0,t++),"number"!=typeof e.coordinates.lng&&void 0!==e.coordinates.lng?(console.log('Converting lng coordinate for activity "'.concat(e.title,'" from ').concat(typeof e.coordinates.lng," to number")),e.coordinates.lng=parseFloat(String(e.coordinates.lng))||-74.006,i=!0,t++):void 0===e.coordinates.lng&&(console.log('Missing lng coordinate for activity "'.concat(e.title,'", adding default')),e.coordinates.lng=-74.006,i=!0,t++),i&&console.log('Fixed coordinates for activity "'.concat(e.title,'": ').concat(JSON.stringify(e.coordinates)))}else console.log('Missing coordinates for activity "'.concat(e.title,'", adding default coordinates')),e.coordinates={lat:40.7128,lng:-74.006},t++;"number"!=typeof e.cost&&(console.log('Converting cost for activity "'.concat(e.title,'" from ').concat(typeof e.cost," to number")),e.cost=parseFloat(String(e.cost))||0,t++)}}return console.log("Validation complete. Fixed ".concat(t," issues.")),e}let f={id:"trip-123",title:"Paris Adventure",destination:"Paris, France",dates:{start:"2023-10-15",end:"2023-10-18"},days:[{date:"2023-10-15",activities:[{id:"act-1",time:"Morning",title:"Eiffel Tower Visit",description:"Start your day with a visit to the iconic Eiffel Tower. Get there early to avoid crowds.",location:"Champ de Mars, 5 Avenue Anatole France, 75007 Paris",coordinates:{lat:48.8584,lng:2.2945},cost:25,image:"/images/eiffel.jpg"},{id:"act-2",time:"Afternoon",title:"Lunch at Le Jules Verne",description:"Enjoy a luxurious lunch at Le Jules Verne restaurant with panoramic views of the city.",location:"Eiffel Tower, Avenue Gustave Eiffel, 75007 Paris",coordinates:{lat:48.858,lng:2.2946},cost:150,image:"/images/jules-verne.jpg"},{id:"act-3",time:"Evening",title:"Seine River Cruise",description:"End your first day with a romantic Seine River cruise, seeing Paris illuminated at night.",location:"Port de la Conf\xe9rence, 75008 Paris",coordinates:{lat:48.8637,lng:2.3085},cost:35,image:"/images/seine-cruise.jpg"}]},{date:"2023-10-16",activities:[{id:"act-4",time:"Morning",title:"Louvre Museum",description:"Spend your morning exploring the world-famous Louvre Museum, home to thousands of works of art including the Mona Lisa.",location:"Rue de Rivoli, 75001 Paris",coordinates:{lat:48.8606,lng:2.3376},cost:17,image:"/images/louvre.jpg"},{id:"act-5",time:"Afternoon",title:"Lunch at Caf\xe9 Marly",description:"Have lunch at the elegant Caf\xe9 Marly with a view of the Louvre Pyramid.",location:"93 Rue de Rivoli, 75001 Paris",coordinates:{lat:48.8631,lng:2.3353},cost:40,image:"/images/cafe-marly.jpg"},{id:"act-6",time:"Evening",title:"Champs-\xc9lys\xe9es & Arc de Triomphe",description:"Walk along the famous Champs-\xc9lys\xe9es avenue and visit the Arc de Triomphe.",location:"Champs-\xc9lys\xe9es, 75008 Paris",coordinates:{lat:48.8738,lng:2.295},cost:12,image:"/images/arc-de-triomphe.jpg"}]},{date:"2023-10-17",activities:[{id:"act-7",time:"Morning",title:"Montmartre & Sacr\xe9-Cœur",description:"Explore the charming district of Montmartre and visit the beautiful Sacr\xe9-Cœur Basilica.",location:"35 Rue du Chevalier de la Barre, 75018 Paris",coordinates:{lat:48.8867,lng:2.3431},cost:0,image:"/images/sacre-coeur.jpg"},{id:"act-8",time:"Afternoon",title:"Lunch at La Maison Rose",description:"Enjoy lunch at the picturesque La Maison Rose, a favorite spot for artists throughout history.",location:"2 Rue de l'Abreuvoir, 75018 Paris",coordinates:{lat:48.8867,lng:2.3385},cost:35,image:"/images/maison-rose.jpg"},{id:"act-9",time:"Evening",title:"Moulin Rouge Show",description:"Experience a spectacular cabaret show at the famous Moulin Rouge.",location:"82 Boulevard de Clichy, 75018 Paris",coordinates:{lat:48.8841,lng:2.3322},cost:120,image:"/images/moulin-rouge.jpg"}]},{date:"2023-10-18",activities:[{id:"act-10",time:"Morning",title:"Notre-Dame Cathedral",description:"Visit the exterior of Notre-Dame Cathedral (currently under restoration) and explore the surrounding \xcele de la Cit\xe9.",location:"6 Parvis Notre-Dame - Pl. Jean-Paul II, 75004 Paris",coordinates:{lat:48.853,lng:2.3499},cost:0,image:"/images/notre-dame.jpg"},{id:"act-11",time:"Afternoon",title:"Luxembourg Gardens",description:"Relax in the beautiful Luxembourg Gardens and enjoy your final afternoon in Paris.",location:"75006 Paris",coordinates:{lat:48.8462,lng:2.3372},cost:0,image:"/images/luxembourg-gardens.jpg"},{id:"act-12",time:"Evening",title:"Farewell Dinner at Le Comptoir du Relais",description:"Say goodbye to Paris with a delicious meal at the popular Le Comptoir du Relais.",location:"9 Carrefour de l'Od\xe9on, 75006 Paris",coordinates:{lat:48.8511,lng:2.339},cost:60,image:"/images/le-comptoir.jpg"}]}],budget:{accommodation:450,food:305,activities:209,transport:150,total:1114}};function y(){let e=(0,r.useRouter)(),[t,i]=(0,s.useState)(f),[n,l]=(0,s.useState)(!0),c=(0,s.useMemo)(()=>{if(!t)return{accommodation:0,food:0,activities:0,transport:0,total:0};let e=t.budget||{},i={accommodation:e.accommodation||0,food:e.food||0,transport:e.transport||0,activities:0,total:0};if(void 0!==e.activities)i.activities=e.activities;else{let e=0;for(let i of t.days||[])if(i.activities&&Array.isArray(i.activities)){for(let t of i.activities)if(t&&"number"==typeof t.cost)e+=t.cost;else if(t&&t.cost){let i=parseFloat(String(t.cost));isNaN(i)||(e+=i)}}i.activities=e}return i.total=i.accommodation+i.food+i.activities+i.transport,void 0!==e.total&&e.total!==i.total&&console.warn("Provided budget total does not match calculated total. Using calculated total for consistency."),i},[t]);return((0,s.useEffect)(()=>{try{console.log("Attempting to load itinerary from localStorage...");let e=localStorage.getItem("generatedItinerary");if(e){console.log("Found itinerary in localStorage"),console.log("First 100 characters:",e.substring(0,100)),console.log("Last 100 characters:",e.substring(e.length-100));let t=e.trim(),a=t.startsWith("{"),s=t.endsWith("}");console.log("JSON validation check - starts with {:",a,", ends with }:",s);try{let t=JSON.parse(e);if(console.log("Successfully parsed itinerary from localStorage"),console.log("Itinerary structure:",Object.keys(t).join(", ")),t.days){if(Array.isArray(t.days)){if(0===t.days.length)console.error("Days array is empty");else{if(console.log("Successfully loaded itinerary with ".concat(t.days.length," days")),t.days[0]&&(console.log("First day structure:",Object.keys(t.days[0]).join(", ")),console.log("First day has activities:",Array.isArray(t.days[0].activities),t.days[0].activities?t.days[0].activities.length:0),t.days[0].activities&&t.days[0].activities.length>0)){let e=t.days[0].activities[0];console.log("First activity properties:",Object.keys(e).join(", ")),console.log("First activity coordinates exists:",!!e.coordinates),e.coordinates&&(console.log("Coordinates type:",typeof e.coordinates),console.log("Coordinates structure:",JSON.stringify(e.coordinates)),console.log("Coordinates lat/lng values:",e.coordinates.lat,e.coordinates.lng),console.log("Are lat/lng valid numbers:",!isNaN(Number(e.coordinates.lat))&&isFinite(Number(e.coordinates.lat)),!isNaN(Number(e.coordinates.lng))&&isFinite(Number(e.coordinates.lng))))}i(p(t))}}else console.error("Days property exists but is not an array:",typeof t.days)}else console.error("Missing days array in parsed itinerary")}catch(e){console.error("Error parsing itinerary JSON:",e)}}else console.log("No itinerary found in localStorage, using mock data")}catch(e){console.error("Error accessing localStorage:",e)}finally{n||t!==f||(console.log("Using mock itinerary, validating coordinates..."),i(p(f))),l(!1)}},[]),n)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[70vh]",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading your itinerary..."})]})}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:t.title}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>{e.push("/trips/new")},className:"bg-primary text-white py-2 px-4 rounded-md hover:bg-opacity-90 flex items-center gap-1",children:[(0,a.jsx)(o.fmQ,{})," ",(0,a.jsx)("span",{children:"Edit Trip"})]}),(0,a.jsxs)("button",{onClick:()=>{alert("Sharing functionality would be implemented here in a real application.")},className:"bg-accent text-white py-2 px-4 rounded-md hover:bg-opacity-90 flex items-center gap-1",children:[(0,a.jsx)(o.Lrt,{})," ",(0,a.jsx)("span",{children:"Share"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 flex flex-wrap gap-6",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-[250px]",children:[(0,a.jsx)("h2",{className:"font-semibold text-lg mb-2",children:"Trip Details"}),(0,a.jsxs)("p",{className:"text-gray-600",children:[(0,a.jsx)("strong",{children:"Destination:"})," ",t.destination]}),(0,a.jsxs)("p",{className:"text-gray-600",children:[(0,a.jsx)("strong",{children:"Dates:"})," ",new Date(t.dates.start).toLocaleDateString()," - ",new Date(t.dates.end).toLocaleDateString()]}),(0,a.jsxs)("p",{className:"text-gray-600",children:[(0,a.jsx)("strong",{children:"Duration:"})," ",t.days.length," days"]})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-[250px]",children:[(0,a.jsx)("h2",{className:"font-semibold text-lg mb-2",children:"Total Budget"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-primary",children:["$",c.total]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"View detailed breakdown below"})]})]}),(0,a.jsx)(m,{days:t.days,budget:c}),(0,a.jsx)("div",{className:"mt-10",children:(0,a.jsx)(x,{destination:t.destination,startDate:t.dates.start,endDate:t.dates.end})})]})}},9376:function(e,t,i){"use strict";var a=i(5475);i.o(a,"useRouter")&&i.d(t,{useRouter:function(){return a.useRouter}})},178:function(e,t,i){"use strict";i.d(t,{w_:function(){return l}});var a=i(2265),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=a.createContext&&a.createContext(s),r=function(){return(r=Object.assign||function(e){for(var t,i=1,a=arguments.length;i<a;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e}).apply(this,arguments)},n=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&0>t.indexOf(a)&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var s=0,a=Object.getOwnPropertySymbols(e);s<a.length;s++)0>t.indexOf(a[s])&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(i[a[s]]=e[a[s]]);return i};function l(e){return function(t){return a.createElement(c,r({attr:r({},e.attr)},t),function e(t){return t&&t.map(function(t,i){return a.createElement(t.tag,r({key:i},t.attr),e(t.child))})}(e.child))}}function c(e){var t=function(t){var i,s=e.attr,o=e.size,l=e.title,c=n(e,["attr","size","title"]),d=o||t.size||"1em";return t.className&&(i=t.className),e.className&&(i=(i?i+" ":"")+e.className),a.createElement("svg",r({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,c,{className:i,style:r(r({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),l&&a.createElement("title",null,l),e.children)};return void 0!==o?a.createElement(o.Consumer,null,function(e){return t(e)}):t(s)}}},function(e){e.O(0,[420,910,971,117,744],function(){return e(e.s=4852)}),_N_E=e.O()}]);