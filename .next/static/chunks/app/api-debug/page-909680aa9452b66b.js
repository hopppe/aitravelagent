(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{8642:function(e,s,t){Promise.resolve().then(t.bind(t,8367))},8367:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return n}});var a=t(7437),l=t(2265),r=t(7648);function n(){let[e,s]=(0,l.useState)(null),[t,n]=(0,l.useState)(!1),[c,d]=(0,l.useState)(""),[i,o]=(0,l.useState)(null),[m,u]=(0,l.useState)(!1),[h,x]=(0,l.useState)(null),[b,j]=(0,l.useState)(null),[g,p]=(0,l.useState)(!1),N=async()=>{n(!0),x(null);try{let e=await fetch("/api/supabase-test"),t=await e.json();s(t)}catch(e){x(e.message||"Failed to test API")}finally{n(!1)}},f=async()=>{if(!c.trim()){x("Please enter a job ID");return}u(!0),x(null);try{let e=await fetch("/api/job-status?jobId=".concat(c)),s=await e.json();e.ok?o(s):(x(s.error||"Error: ".concat(e.status)),o(null))}catch(e){x(e.message||"Failed to check job status"),o(null)}finally{u(!1)}},v=async()=>{p(!0),x(null);try{let e=await fetch("/api/debug-job-creation"),s=await e.json();j(s),s.jobId&&d(s.jobId)}catch(e){x(e.message||"Failed to create test job")}finally{p(!1)}};return(0,l.useEffect)(()=>{N()},[]),(0,a.jsxs)("div",{className:"container mx-auto p-4 max-w-4xl",children:[(0,a.jsxs)("header",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"API and Supabase Debug Page"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Use this page to diagnose issues with the API and Supabase connection"}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)(r.default,{href:"/",className:"text-blue-600 hover:text-blue-800",children:"Return to Home"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,a.jsxs)("section",{className:"bg-white p-4 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Create Test Job"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"Create a test job and check if it can be found immediately. This helps diagnose job creation and retrieval issues."}),(0,a.jsx)("button",{onClick:v,disabled:g,className:"px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 disabled:bg-purple-300",children:g?"Creating...":"Create Test Job"}),b&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("h3",{className:"font-semibold text-lg",children:["Job Creation: ",(0,a.jsx)("span",{className:b.success?"text-green-600":"text-red-600",children:b.success?"SUCCESS":"FAILED"})]}),(0,a.jsx)("p",{className:"my-2",children:b.message}),b.jobId&&(0,a.jsxs)("p",{className:"text-sm",children:["Job ID: ",(0,a.jsx)("span",{className:"font-mono bg-gray-100 px-1",children:b.jobId})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Creation Results:"}),(0,a.jsx)("pre",{className:"mt-2 bg-gray-100 p-3 rounded text-sm overflow-auto max-h-96",children:JSON.stringify(b,null,2)})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("section",{className:"bg-white p-4 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Supabase Connection Test"}),(0,a.jsx)("button",{onClick:N,disabled:t,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:bg-blue-300",children:t?"Testing...":"Run Supabase Test"}),e&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("h3",{className:"font-semibold text-lg",children:["Status: ",(0,a.jsx)("span",{className:e.success?"text-green-600":"text-red-600",children:e.success?"SUCCESS":"FAILED"})]}),(0,a.jsx)("p",{className:"my-2",children:e.message}),e.errors&&e.errors.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Errors:"}),(0,a.jsx)("ul",{className:"list-disc pl-5",children:e.errors.map((e,s)=>(0,a.jsx)("li",{className:"text-red-600",children:e},s))})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Test Results:"}),(0,a.jsx)("pre",{className:"mt-2 bg-gray-100 p-3 rounded text-sm overflow-auto max-h-96",children:JSON.stringify(e,null,2)})]})]})]}),(0,a.jsxs)("section",{className:"bg-white p-4 rounded-lg shadow",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Check Job Status"}),(0,a.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,a.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),placeholder:"Enter Job ID",className:"flex-1 px-3 py-2 border rounded"}),(0,a.jsx)("button",{onClick:f,disabled:m,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:bg-green-300",children:m?"Checking...":"Check Status"})]}),h&&(0,a.jsx)("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded text-red-700",children:h}),i&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("h3",{className:"font-semibold text-lg",children:["Job Status: ",(0,a.jsx)("span",{className:"completed"===i.status?"text-green-600":"failed"===i.status?"text-red-600":"text-blue-600",children:i.status.toUpperCase()})]}),i.error&&(0,a.jsxs)("div",{className:"mt-2 p-2 bg-red-50 border border-red-100 rounded",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Error:"}),(0,a.jsx)("p",{className:"text-red-700",children:i.error})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h4",{className:"font-semibold",children:"Full Response:"}),(0,a.jsx)("pre",{className:"mt-2 bg-gray-100 p-3 rounded text-sm overflow-auto max-h-96",children:JSON.stringify(i,null,2)})]})]})]})]})]})]})}},7648:function(e,s,t){"use strict";t.d(s,{default:function(){return l.a}});var a=t(2972),l=t.n(a)}},function(e){e.O(0,[972,971,117,744],function(){return e(e.s=8642)}),_N_E=e.O()}]);