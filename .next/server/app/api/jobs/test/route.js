"use strict";(()=>{var e={};e.id=698,e.ids=[698],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},7702:e=>{e.exports=require("events")},2048:e=>{e.exports=require("fs")},2615:e=>{e.exports=require("http")},8791:e=>{e.exports=require("https")},8216:e=>{e.exports=require("net")},5315:e=>{e.exports=require("path")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},2452:e=>{e.exports=require("tls")},7360:e=>{e.exports=require("url")},1568:e=>{e.exports=require("zlib")},3e3:(e,s,t)=>{t.r(s),t.d(s,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>d,routeModule:()=>g,serverHooks:()=>h,staticGenerationAsyncStorage:()=>b});var r={};t.r(r),t.d(r,{GET:()=>p,dynamic:()=>i});var o=t(9303),a=t(8716),n=t(3131),u=t(7070),c=t(5662);let i="force-dynamic";async function p(e){try{console.log("Running job system test...");let e=await l(),s=`test_job_${Date.now()}`;if(console.log(`Creating test job with ID: ${s}`),!await (0,c.Cq)(s))return u.NextResponse.json({success:!1,message:"Failed to create test job",connectionStatus:e},{status:500});let t=await (0,c.jW)(s);if(console.log("Initial job status:",t),await new Promise(e=>setTimeout(e,500)),!await (0,c.L2)(s,"processing"))return u.NextResponse.json({success:!1,message:"Failed to update job to processing status",initialJob:t,connectionStatus:e},{status:500});let r=await (0,c.jW)(s);if(!await (0,c.L2)(s,"completed",{result:{message:"Test job completed successfully"}}))return u.NextResponse.json({success:!1,message:"Failed to update job to completed status",initialJob:t,processingJob:r,connectionStatus:e},{status:500});await new Promise(e=>setTimeout(e,500));let o=await (0,c.jW)(s);console.log("Final job status:",o);let a=await m();return u.NextResponse.json({success:!0,message:"Job system test completed successfully",initialJob:t,processingJob:r,finalJob:o,connectionStatus:e,fetchTest:a})}catch(e){return console.error("Job system test failed:",e),u.NextResponse.json({success:!1,message:`Job system test error: ${e.message}`,error:{message:e.message,stack:e.stack?.substring(0,500)}},{status:500})}}async function l(){try{let e={hasUrl:!0,urlLength:40,hasKey:!0,keyLength:208};console.log("Testing direct Supabase connection...");let s=Date.now(),{data:t,error:r}=await c.OQ.from("_nonexistent_test_table").select("*").limit(1).maybeSingle(),o=Date.now()-s;if(r&&("PGRST116"===r.code||"42P01"===r.code))return{connected:!0,message:"Successfully connected to Supabase",responseTime:`${o}ms`,error:{code:r.code,message:r.message},envStatus:e};if(r)return{connected:!1,message:"Supabase returned an error",responseTime:`${o}ms`,error:{code:r.code,message:r.message},envStatus:e};return{connected:!0,message:"Successfully connected to Supabase (unexpected success)",responseTime:`${o}ms`,data:t,envStatus:e}}catch(e){return{connected:!1,message:"Failed to connect to Supabase",error:{message:e.message,type:e.constructor.name},envStatus:{hasUrl:!0,urlLength:40,hasKey:!0,keyLength:208}}}}async function m(){try{let e=Date.now(),s=await fetch("https://httpbin.org/get"),t=Date.now()-e;if(!s.ok)return{success:!1,message:`HTTP error: ${s.status} ${s.statusText}`,responseTime:`${t}ms`};let r=await s.json();return{success:!0,message:"Network fetch test successful",responseTime:`${t}ms`,url:r.url}}catch(e){return{success:!1,message:"Network fetch test failed",error:{message:e.message,type:e.constructor.name}}}}let g=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/jobs/test/route",pathname:"/api/jobs/test",filename:"route",bundlePath:"app/api/jobs/test/route"},resolvedPagePath:"/Users/ethanhoppe/Desktop/AItravelagent/app/api/jobs/test/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:d,staticGenerationAsyncStorage:b,serverHooks:h}=g,x="/api/jobs/test/route";function f(){return(0,n.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:b})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,972,518,662],()=>t(3e3));module.exports=r})();