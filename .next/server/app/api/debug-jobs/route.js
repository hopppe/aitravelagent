"use strict";(()=>{var e={};e.id=365,e.ids=[365],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8893:e=>{e.exports=require("buffer")},4770:e=>{e.exports=require("crypto")},7702:e=>{e.exports=require("events")},2048:e=>{e.exports=require("fs")},2615:e=>{e.exports=require("http")},8791:e=>{e.exports=require("https")},8216:e=>{e.exports=require("net")},5315:e=>{e.exports=require("path")},8621:e=>{e.exports=require("punycode")},6162:e=>{e.exports=require("stream")},2452:e=>{e.exports=require("tls")},7360:e=>{e.exports=require("url")},1568:e=>{e.exports=require("zlib")},4339:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>f,patchFetch:()=>j,requestAsyncStorage:()=>m,routeModule:()=>b,serverHooks:()=>v,staticGenerationAsyncStorage:()=>h});var s={};t.r(s),t.d(s,{GET:()=>g});var o=t(9303),n=t(8716),a=t(3131),i=t(7070),u=t(5662),p=t(7435),c=t(2048),l=t(5315);let d=(0,p.h)("debug-jobs-api");async function g(e){try{d.info("Debug jobs API called");let{searchParams:r}=new URL(e.url),t=parseInt(r.get("limit")||"10",10),s=r.get("action")||"recent",o={apiVersion:"1.0",nodeEnv:"production",hasSupabaseUrl:!0,hasSupabaseKey:!0,hasOpenAIKey:!!process.env.OPENAI_API_KEY?.startsWith("sk-"),serverTime:new Date().toISOString()};if("count"===s){let e=await (0,u.si)();return i.NextResponse.json({success:!0,environment:o,counts:e})}if("memory"===s){let e=(0,u.WC)();return i.NextResponse.json({success:!0,environment:o,inMemoryJobs:e})}if("logs"===s){let e=await x(t);return i.NextResponse.json({success:!0,environment:o,logs:e})}{let e=await (0,u.z0)(t),r=e.map(e=>({id:e.id,status:e.status,created_at:e.created_at,updated_at:e.updated_at,error:e.error,hasResult:!!e.result,resultSize:e.result?JSON.stringify(e.result).length:0}));return i.NextResponse.json({success:!0,environment:o,jobCount:e.length,jobs:r})}}catch(e){return d.error("Error in debug-jobs API:",e),i.NextResponse.json({success:!1,error:e.message||"Unknown error",stack:void 0},{status:500})}}async function x(e=100){try{let r=process.env.LOG_DIR||"logs",t=process.env.LOG_FILE||"app.log",s=l.join(process.cwd(),r,t);if(!c.existsSync(s))return[`Log file not found at ${s}`];return c.readFileSync(s,"utf8").split("\n").filter(e=>""!==e.trim()).map(e=>e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')).slice(-e)}catch(e){return d.error("Error reading logs:",e),[`Error reading logs: ${e.message}`]}}let b=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/debug-jobs/route",pathname:"/api/debug-jobs",filename:"route",bundlePath:"app/api/debug-jobs/route"},resolvedPagePath:"/Users/ethanhoppe/Desktop/AItravelagent/app/api/debug-jobs/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:v}=b,f="/api/debug-jobs/route";function j(){return(0,a.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:h})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[276,972,518,662],()=>t(4339));module.exports=s})();