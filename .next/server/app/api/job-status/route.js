"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/job-status/route";
exports.ids = ["app/api/job-status/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fjob-status%2Froute&page=%2Fapi%2Fjob-status%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fjob-status%2Froute.ts&appDir=%2FUsers%2Fethanhoppe%2FDesktop%2FAItravelagent%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethanhoppe%2FDesktop%2FAItravelagent&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fjob-status%2Froute&page=%2Fapi%2Fjob-status%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fjob-status%2Froute.ts&appDir=%2FUsers%2Fethanhoppe%2FDesktop%2FAItravelagent%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethanhoppe%2FDesktop%2FAItravelagent&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_ethanhoppe_Desktop_AItravelagent_app_api_job_status_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/job-status/route.ts */ \"(rsc)/./app/api/job-status/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/job-status/route\",\n        pathname: \"/api/job-status\",\n        filename: \"route\",\n        bundlePath: \"app/api/job-status/route\"\n    },\n    resolvedPagePath: \"/Users/ethanhoppe/Desktop/AItravelagent/app/api/job-status/route.ts\",\n    nextConfigOutput,\n    userland: _Users_ethanhoppe_Desktop_AItravelagent_app_api_job_status_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/job-status/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZqb2Itc3RhdHVzJTJGcm91dGUmcGFnZT0lMkZhcGklMkZqb2Itc3RhdHVzJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGam9iLXN0YXR1cyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRmV0aGFuaG9wcGUlMkZEZXNrdG9wJTJGQUl0cmF2ZWxhZ2VudCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZldGhhbmhvcHBlJTJGRGVza3RvcCUyRkFJdHJhdmVsYWdlbnQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ21CO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktdHJhdmVsLWFnZW50Lz9kZmJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIi9Vc2Vycy9ldGhhbmhvcHBlL0Rlc2t0b3AvQUl0cmF2ZWxhZ2VudC9hcHAvYXBpL2pvYi1zdGF0dXMvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2pvYi1zdGF0dXMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9qb2Itc3RhdHVzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9qb2Itc3RhdHVzL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL2V0aGFuaG9wcGUvRGVza3RvcC9BSXRyYXZlbGFnZW50L2FwcC9hcGkvam9iLXN0YXR1cy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvam9iLXN0YXR1cy9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fjob-status%2Froute&page=%2Fapi%2Fjob-status%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fjob-status%2Froute.ts&appDir=%2FUsers%2Fethanhoppe%2FDesktop%2FAItravelagent%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethanhoppe%2FDesktop%2FAItravelagent&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/job-status/route.ts":
/*!*************************************!*\
  !*** ./app/api/job-status/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   maxDuration: () => (/* binding */ maxDuration),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/supabase */ \"(rsc)/./lib/supabase.ts\");\n\n\n// Maximum duration to handle potential Supabase connection issues\nconst runtime = \"nodejs\";\nconst maxDuration = 10; // 10 seconds for a status check should be plenty\n// Helper function to get DB-compatible ID (copied for debugging)\nfunction getDbCompatibleId(id) {\n    // If the ID is already numeric, return it as is\n    if (!isNaN(Number(id))) {\n        return Number(id);\n    }\n    // For job IDs that start with a timestamp (job_ or debug_), extract the timestamp\n    const timestampMatch = id.match(/^(job|debug|test)_(\\d+)/);\n    if (timestampMatch && !isNaN(Number(timestampMatch[2]))) {\n        // Use the timestamp portion as the numeric ID\n        return Number(timestampMatch[2]);\n    }\n    // For any other IDs, use a hash function to generate a numeric ID\n    let hash = 0;\n    const prime = 31; // Use a prime number for better distribution\n    for(let i = 0; i < id.length; i++){\n        // Get the character code\n        const char = id.charCodeAt(i);\n        // Multiply the current hash by the prime and add the character code\n        hash = Math.imul(hash, prime) + char | 0;\n    }\n    // Ensure positive number by using absolute value\n    return Math.abs(hash);\n}\nasync function GET(request) {\n    const { searchParams } = new URL(request.url);\n    const jobId = searchParams.get(\"jobId\");\n    console.log(`Job status API called at ${new Date().toISOString()}`);\n    console.log(`Environment: ${\"development\"}`);\n    console.log(`Supabase config: URL exists = ${!!\"https://toaiekqwflojwicejvne.supabase.co\"}, Key exists = ${!!\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvYWlla3F3ZmxvandpY2Vqdm5lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ5MzM2MzMsImV4cCI6MjA2MDUwOTYzM30.E70hBHGjbvCJPjYpMmlMIMvyfyBlotOwP01YaXf37Mg\"}`);\n    if (!jobId) {\n        console.error(\"Missing jobId parameter in request\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Missing jobId parameter\"\n        }, {\n            status: 400\n        });\n    }\n    console.log(`Checking status for job: ${jobId}`);\n    // Debug info about the job ID conversion for logging\n    const dbCompatibleId = getDbCompatibleId(jobId);\n    console.log(`Job ID conversion: \"${jobId}\" -> ${dbCompatibleId} (db-compatible)`);\n    try {\n        console.log(`Getting status for job ${jobId}`);\n        const jobStatus = await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.getJobStatus)(jobId);\n        console.log(`Job ${jobId} status result:`, {\n            statusFound: jobStatus.status !== \"not_found\",\n            status: jobStatus.status,\n            hasResult: !!jobStatus.result,\n            hasError: !!jobStatus.error\n        });\n        if (jobStatus.status === \"not_found\") {\n            console.log(`Job ${jobId} not found`);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Job not found\",\n                debug: {\n                    jobId,\n                    dbCompatibleId,\n                    timestamp: new Date().toISOString(),\n                    environment: \"development\" || 0,\n                    supabaseConfigured:  true && !!\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvYWlla3F3ZmxvandpY2Vqdm5lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ5MzM2MzMsImV4cCI6MjA2MDUwOTYzM30.E70hBHGjbvCJPjYpMmlMIMvyfyBlotOwP01YaXf37Mg\"\n                }\n            }, {\n                status: 404\n            });\n        }\n        console.log(`Returning job status: ${jobStatus.status}`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            ...jobStatus,\n            _debug: {\n                originalJobId: jobId,\n                dbCompatibleId,\n                timestamp: new Date().toISOString()\n            }\n        });\n    } catch (error) {\n        console.error(`Error retrieving job status for ${jobId}:`, error);\n        // Enhanced error logging\n        console.error(\"Error details:\", {\n            message: error.message,\n            stack: error.stack?.substring(0, 200),\n            name: error.name,\n            jobId,\n            dbCompatibleId\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to retrieve job status\",\n            message: error.message,\n            _debug: {\n                originalJobId: jobId,\n                dbCompatibleId,\n                timestamp: new Date().toISOString()\n            }\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2pvYi1zdGF0dXMvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBMkM7QUFDVTtBQUVyRCxrRUFBa0U7QUFDM0QsTUFBTUUsVUFBVSxTQUFTO0FBQ3pCLE1BQU1DLGNBQWMsR0FBRyxDQUFDLGlEQUFpRDtBQUVoRixpRUFBaUU7QUFDakUsU0FBU0Msa0JBQWtCQyxFQUFVO0lBQ25DLGdEQUFnRDtJQUNoRCxJQUFJLENBQUNDLE1BQU1DLE9BQU9GLE1BQU07UUFDdEIsT0FBT0UsT0FBT0Y7SUFDaEI7SUFFQSxrRkFBa0Y7SUFDbEYsTUFBTUcsaUJBQWlCSCxHQUFHSSxLQUFLLENBQUM7SUFDaEMsSUFBSUQsa0JBQWtCLENBQUNGLE1BQU1DLE9BQU9DLGNBQWMsQ0FBQyxFQUFFLElBQUk7UUFDdkQsOENBQThDO1FBQzlDLE9BQU9ELE9BQU9DLGNBQWMsQ0FBQyxFQUFFO0lBQ2pDO0lBRUEsa0VBQWtFO0lBQ2xFLElBQUlFLE9BQU87SUFDWCxNQUFNQyxRQUFRLElBQUksNkNBQTZDO0lBRS9ELElBQUssSUFBSUMsSUFBSSxHQUFHQSxJQUFJUCxHQUFHUSxNQUFNLEVBQUVELElBQUs7UUFDbEMseUJBQXlCO1FBQ3pCLE1BQU1FLE9BQU9ULEdBQUdVLFVBQVUsQ0FBQ0g7UUFDM0Isb0VBQW9FO1FBQ3BFRixPQUFPTSxLQUFLQyxJQUFJLENBQUNQLE1BQU1DLFNBQVNHLE9BQU87SUFDekM7SUFFQSxpREFBaUQ7SUFDakQsT0FBT0UsS0FBS0UsR0FBRyxDQUFDUjtBQUNsQjtBQUVPLGVBQWVTLElBQUlDLE9BQWdCO0lBQ3hDLE1BQU0sRUFBRUMsWUFBWSxFQUFFLEdBQUcsSUFBSUMsSUFBSUYsUUFBUUcsR0FBRztJQUM1QyxNQUFNQyxRQUFRSCxhQUFhSSxHQUFHLENBQUM7SUFFL0JDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHlCQUF5QixFQUFFLElBQUlDLE9BQU9DLFdBQVcsR0FBRyxDQUFDO0lBQ2xFSCxRQUFRQyxHQUFHLENBQUMsQ0FBQyxhQUFhLEVBekM1QixjQXlDbUQsQ0FBQztJQUNsREQsUUFBUUMsR0FBRyxDQUFDLENBQUMsOEJBQThCLEVBQUUsQ0FBQyxDQUFDRywwQ0FBb0MsQ0FBQyxlQUFlLEVBQUUsQ0FBQyxDQUFDQSxrTkFBeUMsQ0FBQyxDQUFDO0lBRWxKLElBQUksQ0FBQ04sT0FBTztRQUNWRSxRQUFRUSxLQUFLLENBQUM7UUFDZCxPQUFPbEMscURBQVlBLENBQUNtQyxJQUFJLENBQ3RCO1lBQUVELE9BQU87UUFBMEIsR0FDbkM7WUFBRUUsUUFBUTtRQUFJO0lBRWxCO0lBRUFWLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHlCQUF5QixFQUFFSCxNQUFNLENBQUM7SUFFL0MscURBQXFEO0lBQ3JELE1BQU1hLGlCQUFpQmpDLGtCQUFrQm9CO0lBQ3pDRSxRQUFRQyxHQUFHLENBQUMsQ0FBQyxvQkFBb0IsRUFBRUgsTUFBTSxLQUFLLEVBQUVhLGVBQWUsZ0JBQWdCLENBQUM7SUFFaEYsSUFBSTtRQUNGWCxRQUFRQyxHQUFHLENBQUMsQ0FBQyx1QkFBdUIsRUFBRUgsTUFBTSxDQUFDO1FBQzdDLE1BQU1jLFlBQVksTUFBTXJDLDJEQUFZQSxDQUFDdUI7UUFFckNFLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRUgsTUFBTSxlQUFlLENBQUMsRUFBRTtZQUN6Q2UsYUFBYUQsVUFBVUYsTUFBTSxLQUFLO1lBQ2xDQSxRQUFRRSxVQUFVRixNQUFNO1lBQ3hCSSxXQUFXLENBQUMsQ0FBQ0YsVUFBVUcsTUFBTTtZQUM3QkMsVUFBVSxDQUFDLENBQUNKLFVBQVVKLEtBQUs7UUFDN0I7UUFFQSxJQUFJSSxVQUFVRixNQUFNLEtBQUssYUFBYTtZQUNwQ1YsUUFBUUMsR0FBRyxDQUFDLENBQUMsSUFBSSxFQUFFSCxNQUFNLFVBQVUsQ0FBQztZQUNwQyxPQUFPeEIscURBQVlBLENBQUNtQyxJQUFJLENBQ3RCO2dCQUNFRCxPQUFPO2dCQUNQUyxPQUFPO29CQUNMbkI7b0JBQ0FhO29CQUNBTyxXQUFXLElBQUloQixPQUFPQyxXQUFXO29CQUNqQ2dCLGFBQWFmLGlCQUF3QjtvQkFDckNnQixvQkFBb0IsS0FBc0MsSUFBSSxDQUFDLENBQUNoQixrTkFBeUM7Z0JBQzNHO1lBQ0YsR0FDQTtnQkFBRU0sUUFBUTtZQUFJO1FBRWxCO1FBRUFWLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLHNCQUFzQixFQUFFVyxVQUFVRixNQUFNLENBQUMsQ0FBQztRQUN2RCxPQUFPcEMscURBQVlBLENBQUNtQyxJQUFJLENBQUM7WUFDdkIsR0FBR0csU0FBUztZQUNaUyxRQUFRO2dCQUNOQyxlQUFleEI7Z0JBQ2ZhO2dCQUNBTyxXQUFXLElBQUloQixPQUFPQyxXQUFXO1lBQ25DO1FBQ0Y7SUFDRixFQUFFLE9BQU9LLE9BQVk7UUFDbkJSLFFBQVFRLEtBQUssQ0FBQyxDQUFDLGdDQUFnQyxFQUFFVixNQUFNLENBQUMsQ0FBQyxFQUFFVTtRQUUzRCx5QkFBeUI7UUFDekJSLFFBQVFRLEtBQUssQ0FBQyxrQkFBa0I7WUFDOUJlLFNBQVNmLE1BQU1lLE9BQU87WUFDdEJDLE9BQU9oQixNQUFNZ0IsS0FBSyxFQUFFQyxVQUFVLEdBQUc7WUFDakNDLE1BQU1sQixNQUFNa0IsSUFBSTtZQUNoQjVCO1lBQ0FhO1FBQ0Y7UUFFQSxPQUFPckMscURBQVlBLENBQUNtQyxJQUFJLENBQ3RCO1lBQ0VELE9BQU87WUFDUGUsU0FBU2YsTUFBTWUsT0FBTztZQUN0QkYsUUFBUTtnQkFDTkMsZUFBZXhCO2dCQUNmYTtnQkFDQU8sV0FBVyxJQUFJaEIsT0FBT0MsV0FBVztZQUNuQztRQUNGLEdBQ0E7WUFBRU8sUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS10cmF2ZWwtYWdlbnQvLi9hcHAvYXBpL2pvYi1zdGF0dXMvcm91dGUudHM/ZDNkNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBnZXRKb2JTdGF0dXMgfSBmcm9tICcuLi8uLi8uLi9saWIvc3VwYWJhc2UnO1xuXG4vLyBNYXhpbXVtIGR1cmF0aW9uIHRvIGhhbmRsZSBwb3RlbnRpYWwgU3VwYWJhc2UgY29ubmVjdGlvbiBpc3N1ZXNcbmV4cG9ydCBjb25zdCBydW50aW1lID0gJ25vZGVqcyc7XG5leHBvcnQgY29uc3QgbWF4RHVyYXRpb24gPSAxMDsgLy8gMTAgc2Vjb25kcyBmb3IgYSBzdGF0dXMgY2hlY2sgc2hvdWxkIGJlIHBsZW50eVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IERCLWNvbXBhdGlibGUgSUQgKGNvcGllZCBmb3IgZGVidWdnaW5nKVxuZnVuY3Rpb24gZ2V0RGJDb21wYXRpYmxlSWQoaWQ6IHN0cmluZyk6IG51bWJlciB7XG4gIC8vIElmIHRoZSBJRCBpcyBhbHJlYWR5IG51bWVyaWMsIHJldHVybiBpdCBhcyBpc1xuICBpZiAoIWlzTmFOKE51bWJlcihpZCkpKSB7XG4gICAgcmV0dXJuIE51bWJlcihpZCk7XG4gIH1cbiAgXG4gIC8vIEZvciBqb2IgSURzIHRoYXQgc3RhcnQgd2l0aCBhIHRpbWVzdGFtcCAoam9iXyBvciBkZWJ1Z18pLCBleHRyYWN0IHRoZSB0aW1lc3RhbXBcbiAgY29uc3QgdGltZXN0YW1wTWF0Y2ggPSBpZC5tYXRjaCgvXihqb2J8ZGVidWd8dGVzdClfKFxcZCspLyk7XG4gIGlmICh0aW1lc3RhbXBNYXRjaCAmJiAhaXNOYU4oTnVtYmVyKHRpbWVzdGFtcE1hdGNoWzJdKSkpIHtcbiAgICAvLyBVc2UgdGhlIHRpbWVzdGFtcCBwb3J0aW9uIGFzIHRoZSBudW1lcmljIElEXG4gICAgcmV0dXJuIE51bWJlcih0aW1lc3RhbXBNYXRjaFsyXSk7XG4gIH1cblxuICAvLyBGb3IgYW55IG90aGVyIElEcywgdXNlIGEgaGFzaCBmdW5jdGlvbiB0byBnZW5lcmF0ZSBhIG51bWVyaWMgSURcbiAgbGV0IGhhc2ggPSAwO1xuICBjb25zdCBwcmltZSA9IDMxOyAvLyBVc2UgYSBwcmltZSBudW1iZXIgZm9yIGJldHRlciBkaXN0cmlidXRpb25cbiAgXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaWQubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBHZXQgdGhlIGNoYXJhY3RlciBjb2RlXG4gICAgY29uc3QgY2hhciA9IGlkLmNoYXJDb2RlQXQoaSk7XG4gICAgLy8gTXVsdGlwbHkgdGhlIGN1cnJlbnQgaGFzaCBieSB0aGUgcHJpbWUgYW5kIGFkZCB0aGUgY2hhcmFjdGVyIGNvZGVcbiAgICBoYXNoID0gTWF0aC5pbXVsKGhhc2gsIHByaW1lKSArIGNoYXIgfCAwO1xuICB9XG4gIFxuICAvLyBFbnN1cmUgcG9zaXRpdmUgbnVtYmVyIGJ5IHVzaW5nIGFic29sdXRlIHZhbHVlXG4gIHJldHVybiBNYXRoLmFicyhoYXNoKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXF1ZXN0OiBSZXF1ZXN0KSB7XG4gIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgY29uc3Qgam9iSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KCdqb2JJZCcpO1xuICBcbiAgY29uc29sZS5sb2coYEpvYiBzdGF0dXMgQVBJIGNhbGxlZCBhdCAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1gKTtcbiAgY29uc29sZS5sb2coYEVudmlyb25tZW50OiAke3Byb2Nlc3MuZW52Lk5PREVfRU5WfWApO1xuICBjb25zb2xlLmxvZyhgU3VwYWJhc2UgY29uZmlnOiBVUkwgZXhpc3RzID0gJHshIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTH0sIEtleSBleGlzdHMgPSAkeyEhcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVl9YCk7XG4gIFxuICBpZiAoIWpvYklkKSB7XG4gICAgY29uc29sZS5lcnJvcignTWlzc2luZyBqb2JJZCBwYXJhbWV0ZXIgaW4gcmVxdWVzdCcpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICdNaXNzaW5nIGpvYklkIHBhcmFtZXRlcicgfSxcbiAgICAgIHsgc3RhdHVzOiA0MDAgfVxuICAgICk7XG4gIH1cbiAgXG4gIGNvbnNvbGUubG9nKGBDaGVja2luZyBzdGF0dXMgZm9yIGpvYjogJHtqb2JJZH1gKTtcbiAgXG4gIC8vIERlYnVnIGluZm8gYWJvdXQgdGhlIGpvYiBJRCBjb252ZXJzaW9uIGZvciBsb2dnaW5nXG4gIGNvbnN0IGRiQ29tcGF0aWJsZUlkID0gZ2V0RGJDb21wYXRpYmxlSWQoam9iSWQpO1xuICBjb25zb2xlLmxvZyhgSm9iIElEIGNvbnZlcnNpb246IFwiJHtqb2JJZH1cIiAtPiAke2RiQ29tcGF0aWJsZUlkfSAoZGItY29tcGF0aWJsZSlgKTtcbiAgXG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coYEdldHRpbmcgc3RhdHVzIGZvciBqb2IgJHtqb2JJZH1gKTtcbiAgICBjb25zdCBqb2JTdGF0dXMgPSBhd2FpdCBnZXRKb2JTdGF0dXMoam9iSWQpO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGBKb2IgJHtqb2JJZH0gc3RhdHVzIHJlc3VsdDpgLCB7XG4gICAgICBzdGF0dXNGb3VuZDogam9iU3RhdHVzLnN0YXR1cyAhPT0gJ25vdF9mb3VuZCcsXG4gICAgICBzdGF0dXM6IGpvYlN0YXR1cy5zdGF0dXMsXG4gICAgICBoYXNSZXN1bHQ6ICEham9iU3RhdHVzLnJlc3VsdCxcbiAgICAgIGhhc0Vycm9yOiAhIWpvYlN0YXR1cy5lcnJvclxuICAgIH0pO1xuICAgIFxuICAgIGlmIChqb2JTdGF0dXMuc3RhdHVzID09PSAnbm90X2ZvdW5kJykge1xuICAgICAgY29uc29sZS5sb2coYEpvYiAke2pvYklkfSBub3QgZm91bmRgKTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBcbiAgICAgICAgICBlcnJvcjogJ0pvYiBub3QgZm91bmQnLFxuICAgICAgICAgIGRlYnVnOiB7XG4gICAgICAgICAgICBqb2JJZCxcbiAgICAgICAgICAgIGRiQ29tcGF0aWJsZUlkLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgICAgICBlbnZpcm9ubWVudDogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgfHwgJ3Vua25vd24nLFxuICAgICAgICAgICAgc3VwYWJhc2VDb25maWd1cmVkOiAhIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCAmJiAhIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZLFxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwNCB9XG4gICAgICApO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhgUmV0dXJuaW5nIGpvYiBzdGF0dXM6ICR7am9iU3RhdHVzLnN0YXR1c31gKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgLi4uam9iU3RhdHVzLFxuICAgICAgX2RlYnVnOiB7XG4gICAgICAgIG9yaWdpbmFsSm9iSWQ6IGpvYklkLFxuICAgICAgICBkYkNvbXBhdGlibGVJZCxcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH1cbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIHJldHJpZXZpbmcgam9iIHN0YXR1cyBmb3IgJHtqb2JJZH06YCwgZXJyb3IpO1xuICAgIFxuICAgIC8vIEVuaGFuY2VkIGVycm9yIGxvZ2dpbmdcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZXRhaWxzOicsIHtcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICBzdGFjazogZXJyb3Iuc3RhY2s/LnN1YnN0cmluZygwLCAyMDApLFxuICAgICAgbmFtZTogZXJyb3IubmFtZSxcbiAgICAgIGpvYklkLFxuICAgICAgZGJDb21wYXRpYmxlSWRcbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7IFxuICAgICAgICBlcnJvcjogJ0ZhaWxlZCB0byByZXRyaWV2ZSBqb2Igc3RhdHVzJywgXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIF9kZWJ1Zzoge1xuICAgICAgICAgIG9yaWdpbmFsSm9iSWQ6IGpvYklkLFxuICAgICAgICAgIGRiQ29tcGF0aWJsZUlkLFxuICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRKb2JTdGF0dXMiLCJydW50aW1lIiwibWF4RHVyYXRpb24iLCJnZXREYkNvbXBhdGlibGVJZCIsImlkIiwiaXNOYU4iLCJOdW1iZXIiLCJ0aW1lc3RhbXBNYXRjaCIsIm1hdGNoIiwiaGFzaCIsInByaW1lIiwiaSIsImxlbmd0aCIsImNoYXIiLCJjaGFyQ29kZUF0IiwiTWF0aCIsImltdWwiLCJhYnMiLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwiam9iSWQiLCJnZXQiLCJjb25zb2xlIiwibG9nIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiZXJyb3IiLCJqc29uIiwic3RhdHVzIiwiZGJDb21wYXRpYmxlSWQiLCJqb2JTdGF0dXMiLCJzdGF0dXNGb3VuZCIsImhhc1Jlc3VsdCIsInJlc3VsdCIsImhhc0Vycm9yIiwiZGVidWciLCJ0aW1lc3RhbXAiLCJlbnZpcm9ubWVudCIsInN1cGFiYXNlQ29uZmlndXJlZCIsIl9kZWJ1ZyIsIm9yaWdpbmFsSm9iSWQiLCJtZXNzYWdlIiwic3RhY2siLCJzdWJzdHJpbmciLCJuYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/job-status/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.ts":
/*!*************************!*\
  !*** ./lib/supabase.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createJob: () => (/* binding */ createJob),\n/* harmony export */   getJobStatus: () => (/* binding */ getJobStatus),\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   updateJobStatus: () => (/* binding */ updateJobStatus)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n// Explicitly log all environment variables for debugging\nconsole.log(\"NODE_ENV:\", \"development\");\nconsole.log(\"Environment Variables Overview:\", {\n    hasProcessEnv: typeof process !== \"undefined\" && !!process.env,\n    nodeEnv: \"development\",\n    hasSbUrl: \"NEXT_PUBLIC_SUPABASE_URL\" in process.env,\n    hasSbKey: \"NEXT_PUBLIC_SUPABASE_ANON_KEY\" in process.env,\n    nextConfig: \"string\" === \"string\",\n    envVarCount: Object.keys(process.env).filter((key)=>key.startsWith(\"NEXT_\")).length\n});\n// Supabase client setup\n// Directly access variables for debugging rather than using || '' pattern initially\nlet supabaseUrl = \"https://toaiekqwflojwicejvne.supabase.co\";\nlet supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRvYWlla3F3ZmxvandpY2Vqdm5lIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ5MzM2MzMsImV4cCI6MjA2MDUwOTYzM30.E70hBHGjbvCJPjYpMmlMIMvyfyBlotOwP01YaXf37Mg\";\n// Debug Supabase setup without exposing keys\nconsole.log(\"Direct Supabase URL:\", supabaseUrl?.substring(0, 12) + \"...\" || 0);\nconsole.log(\"Direct Supabase Key:\", supabaseAnonKey?.substring(0, 6) + \"...\" || 0);\n// Fallback to empty string if undefined\nsupabaseUrl = supabaseUrl || \"\";\nsupabaseAnonKey = supabaseAnonKey || \"\";\n// Debug Supabase setup without exposing keys\nconsole.log(\"Supabase configuration check:\", {\n    hasUrl: Boolean(supabaseUrl),\n    urlLength: supabaseUrl?.length || 0,\n    urlPrefix: supabaseUrl?.substring(0, 8) || \"\",\n    hasKey: Boolean(supabaseAnonKey),\n    keyLength: supabaseAnonKey?.length || 0,\n    keyPrefix: supabaseAnonKey?.substring(0, 4) || \"\"\n});\n// Check if Supabase is configured properly\nconst isSupabaseConfigured = Boolean(supabaseUrl && supabaseAnonKey);\n// In-memory store to track if Supabase connectivity failed during runtime\nlet supabaseDisabled = false;\n// Initialize the Supabase client with explicit options for better reliability\nconst supabase = isSupabaseConfigured ? (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey, {\n    auth: {\n        persistSession: false,\n        autoRefreshToken: false\n    },\n    global: {\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    },\n    db: {\n        schema: \"public\"\n    }\n}) : (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://placeholder-url.supabase.co\", \"placeholder-key\", {\n    auth: {\n        persistSession: false,\n        autoRefreshToken: false\n    }\n});\n// Log initialization status\nif (!isSupabaseConfigured) {\n    console.log(\"Supabase not properly configured. Using in-memory job storage as fallback.\");\n} else {\n    console.log(\"Supabase client initialized, verifying connection...\");\n    // Attempt to verify connection and ensure the jobs table exists\n    verifySupabaseConnection().catch((err)=>{\n        console.warn(\"Failed to verify Supabase connection:\", err.message);\n    });\n}\n// In-memory fallback store for development or when Supabase isn't configured\nconst inMemoryJobs = {};\n// Function to verify the Supabase connection\nasync function verifySupabaseConnection() {\n    if (!isSupabaseConfigured) return;\n    try {\n        console.log(\"Checking Supabase connection...\");\n        // First try to directly query if the jobs table exists\n        const { data, error } = await supabase.from(\"jobs\").select(\"*\").limit(1);\n        if (error) {\n            // Table might not exist\n            if (error.code === \"42P01\") {\n                console.log(\"Jobs table does not exist, will attempt to create it\");\n                await ensureJobsTableExists();\n            } else {\n                console.error(\"Supabase connection verification failed:\", {\n                    message: error.message,\n                    code: error.code,\n                    details: error.details\n                });\n            }\n        } else {\n            console.log(\"Supabase connection verified successfully, jobs table exists\");\n            // Check to see if we have the right columns\n            await checkTableStructure(data);\n        }\n    } catch (error) {\n        console.error(\"Error verifying Supabase connection:\", {\n            message: error.message,\n            stack: error.stack?.substring(0, 200)\n        });\n        // If this is a network error, disable Supabase\n        if (error.message?.includes(\"fetch failed\") || error.message?.includes(\"network error\") || error instanceof TypeError) {\n            console.warn(\"Disabling Supabase due to connection issues\");\n            supabaseDisabled = true;\n        }\n    }\n}\n// Check and adapt to existing table structure\nasync function checkTableStructure(sampleData) {\n    if (sampleData && sampleData.length > 0) {\n        // Log the structure we found for debugging\n        const firstRow = sampleData[0];\n        console.log(\"Found existing jobs table with columns:\", Object.keys(firstRow).join(\", \"));\n    }\n}\n// Function to check and create the jobs table if it doesn't exist\nasync function ensureJobsTableExists() {\n    if (!isSupabaseConfigured) return;\n    try {\n        console.log(\"Attempting to create jobs table...\");\n        // Check if we have permission to execute SQL\n        try {\n            // First, try to create a simple table with the minimum required fields\n            const createTableSQL = `\n        CREATE TABLE IF NOT EXISTS jobs (\n          id BIGINT PRIMARY KEY,\n          status TEXT,\n          result JSONB,\n          error TEXT,\n          created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),\n          updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()\n        );\n      `;\n            const { error: createError } = await supabase.rpc(\"execute_sql\", {\n                sql: createTableSQL\n            });\n            if (createError) {\n                console.error(\"Failed to create jobs table via SQL:\", createError);\n                // Try an alternative approach - using the insert API\n                console.log(\"Trying to create jobs table via insert...\");\n                const { error: insertError } = await supabase.from(\"jobs\").insert({\n                    id: 0,\n                    status: \"test\",\n                    result: null,\n                    error: null,\n                    created_at: new Date().toISOString(),\n                    updated_at: new Date().toISOString()\n                });\n                if (insertError) {\n                    // If Supabase doesn't let us create the table, log what needs to be created\n                    console.error(\"Cannot create jobs table automatically:\", insertError);\n                    console.error(\"Please create the jobs table manually with this SQL:\");\n                    console.error(createTableSQL);\n                } else {\n                    console.log(\"Jobs table created successfully through insert\");\n                    // Clean up test record\n                    await supabase.from(\"jobs\").delete().eq(\"id\", 0);\n                }\n            } else {\n                console.log(\"Jobs table created successfully through SQL\");\n            }\n        } catch (sqlError) {\n            console.error(\"Error executing SQL:\", sqlError.message);\n        }\n    } catch (error) {\n        console.error(\"Error ensuring jobs table exists:\", error.message);\n    // This error is handled gracefully, we'll just use in-memory storage\n    }\n}\n// Convert string ID to a numeric hash if needed for Supabase compatibility\nfunction getDbCompatibleId(id) {\n    // If the ID is already numeric, return it as is\n    if (!isNaN(Number(id))) {\n        return Number(id);\n    }\n    // For job IDs that start with a timestamp (job_ or debug_), extract the timestamp\n    // This ensures consistent ID generation across environments\n    const timestampMatch = id.match(/^(job|debug|test)_(\\d+)/);\n    if (timestampMatch && !isNaN(Number(timestampMatch[2]))) {\n        // Use the timestamp portion as the numeric ID\n        return Number(timestampMatch[2]);\n    }\n    // For any other IDs, use a hash function to generate a numeric ID\n    // This is useful for non-standard job IDs\n    let hash = 0;\n    const prime = 31; // Use a prime number for better distribution\n    for(let i = 0; i < id.length; i++){\n        // Get the character code\n        const char = id.charCodeAt(i);\n        // Multiply the current hash by the prime and add the character code\n        hash = Math.imul(hash, prime) + char | 0;\n    }\n    // Ensure positive number by using absolute value and make it large enough to avoid collisions\n    return Math.abs(hash);\n}\n// Check if Supabase should be used\nfunction shouldUseSupabase() {\n    return isSupabaseConfigured && !supabaseDisabled;\n}\n// Handle Supabase errors consistently\nfunction handleSupabaseError(error) {\n    console.error(\"Supabase operation failed:\", {\n        message: error.message,\n        name: error.name,\n        code: error.code,\n        hint: error.hint,\n        details: error.details,\n        isTypeError: error instanceof TypeError\n    });\n    // If we get a fetch error, disable Supabase for this session\n    if (error instanceof TypeError && (error.message?.includes(\"fetch failed\") || error.message?.includes(\"network error\"))) {\n        console.warn(\"Disabling Supabase due to connectivity issues. Using in-memory storage as fallback.\");\n        supabaseDisabled = true;\n    }\n}\n// Function to create or update a job\nasync function updateJobStatus(jobId, status, data) {\n    // Create in-memory fallback entry\n    const memoryJob = {\n        id: jobId,\n        status: status,\n        result: data?.result || undefined,\n        error: data?.error || undefined,\n        created_at: inMemoryJobs[jobId]?.created_at || new Date().toISOString(),\n        updated_at: new Date().toISOString()\n    };\n    // Save to in-memory store\n    inMemoryJobs[jobId] = memoryJob;\n    // If we shouldn't use Supabase, return early with success\n    if (!shouldUseSupabase()) {\n        return true;\n    }\n    try {\n        const dbId = getDbCompatibleId(jobId);\n        // Ensure result is properly serialized before sending to Supabase\n        let safeResult = null;\n        if (data?.result) {\n            try {\n                // Log coordinates before serialization if they exist\n                if (data.result?.itinerary?.days) {\n                    console.log(\"Checking coordinates before serialization...\");\n                    const days = data.result.itinerary.days;\n                    let hasCoordinateIssues = false;\n                    for(let i = 0; i < days.length; i++){\n                        const day = days[i];\n                        if (day.activities && Array.isArray(day.activities)) {\n                            for(let j = 0; j < day.activities.length; j++){\n                                const activity = day.activities[j];\n                                if (!activity.coordinates || typeof activity.coordinates !== \"object\") {\n                                    console.error(`Missing coordinates in day ${i}, activity ${j}: ${activity.title}`);\n                                    hasCoordinateIssues = true;\n                                } else {\n                                    if (activity.coordinates.lat === undefined || activity.coordinates.lng === undefined) {\n                                        console.error(`Incomplete coordinates in day ${i}, activity ${j}: ${JSON.stringify(activity.coordinates)}`);\n                                        hasCoordinateIssues = true;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                    if (!hasCoordinateIssues) {\n                        console.log(\"All coordinates look valid before serialization\");\n                    }\n                }\n                // Test serialization first to catch any issues\n                JSON.stringify(data.result);\n                safeResult = data.result;\n            } catch (e) {\n                console.error(\"Failed to serialize job result to JSON:\", e);\n                safeResult = {\n                    error: \"Result contained unserializable data\"\n                };\n            }\n        }\n        console.log(`Updating job ${jobId} (dbId: ${dbId}) status to ${status}`);\n        // First, get the current job to preserve created_at\n        let created_at = memoryJob.created_at;\n        try {\n            const { data: existingJob } = await supabase.from(\"jobs\").select(\"created_at\").eq(\"id\", dbId).single();\n            if (existingJob?.created_at) {\n                created_at = existingJob.created_at;\n                console.log(`Using existing created_at timestamp: ${created_at}`);\n            } else {\n                console.log(`No existing created_at found, using default created_at: ${created_at}`);\n            }\n        } catch (err) {\n            console.log(`Could not fetch existing job, using default created_at: ${created_at}`);\n        }\n        // Now update with the preserved created_at\n        const { error } = await supabase.from(\"jobs\").upsert({\n            id: dbId,\n            status,\n            result: safeResult,\n            error: data?.error || null,\n            created_at: created_at,\n            updated_at: new Date().toISOString()\n        }, {\n            onConflict: \"id\"\n        });\n        if (error) {\n            console.error(\"Error updating job status in Supabase:\", {\n                code: error.code,\n                message: error.message,\n                details: error.details,\n                jobId,\n                dbId,\n                status\n            });\n        } else {\n            console.log(`Successfully updated job ${jobId} in Supabase`);\n        }\n    } catch (error) {\n        handleSupabaseError(error);\n    }\n    // Always return true since we saved to in-memory storage\n    return true;\n}\n// Get the status of a job\nasync function getJobStatus(jobId) {\n    // Enhanced logging for troubleshooting\n    console.log(`========== JOB STATUS CHECK ==========`);\n    console.log(`getJobStatus called for job: ${jobId}`);\n    console.log(`Environment: ${\"development\"}`);\n    console.log(`Supabase configured: ${isSupabaseConfigured}`);\n    console.log(`Supabase disabled flag: ${supabaseDisabled}`);\n    console.log(`shouldUseSupabase(): ${shouldUseSupabase()}`);\n    // Check in-memory storage first\n    const memoryJob = inMemoryJobs[jobId];\n    // Log in-memory job status\n    console.log(`In-memory job status for ${jobId}: ${memoryJob ? memoryJob.status : \"not found\"}`);\n    console.log(`In-memory jobs count: ${Object.keys(inMemoryJobs).length}`);\n    console.log(`All in-memory job IDs: ${Object.keys(inMemoryJobs).join(\", \").substring(0, 200)}`);\n    // Not even in memory\n    if (!memoryJob) {\n        console.log(`Job ${jobId} not found in memory, will check Supabase if available`);\n        // If Supabase is properly configured and not disabled, try to fetch from there\n        if (shouldUseSupabase()) {\n            try {\n                const dbId = getDbCompatibleId(jobId);\n                console.log(`Checking Supabase for job ${jobId} (DB ID: ${dbId})`);\n                const { data, error } = await supabase.from(\"jobs\").select(\"*\").eq(\"id\", dbId).maybeSingle();\n                if (error) {\n                    console.error(`Supabase error checking for job ${jobId}:`, {\n                        message: error.message,\n                        code: error.code,\n                        details: error.details\n                    });\n                    return {\n                        status: \"not_found\"\n                    };\n                }\n                if (!data) {\n                    console.log(`Job ${jobId} not found in Supabase either`);\n                    return {\n                        status: \"not_found\"\n                    };\n                }\n                console.log(`Found job ${jobId} in Supabase with status: ${data.status}`);\n                // Store in memory for future quick access\n                inMemoryJobs[jobId] = {\n                    id: jobId,\n                    status: data.status,\n                    result: data.result,\n                    error: data.error,\n                    created_at: data.created_at,\n                    updated_at: data.updated_at\n                };\n                return {\n                    status: data.status,\n                    result: data.result,\n                    error: data.error\n                };\n            } catch (error) {\n                console.error(`Exception checking Supabase for job ${jobId}:`, {\n                    message: error.message,\n                    stack: error.stack?.substring(0, 200)\n                });\n                return {\n                    status: \"not_found\"\n                };\n            }\n        } else {\n            console.log(`Supabase not available, job ${jobId} is not found`);\n            return {\n                status: \"not_found\"\n            };\n        }\n    }\n    // If Supabase is disabled or improperly configured, only use in-memory storage\n    if (!shouldUseSupabase()) {\n        console.log(`Using in-memory data for job ${jobId} (Supabase not available)`);\n        return {\n            status: memoryJob.status,\n            result: memoryJob.result,\n            error: memoryJob.error\n        };\n    }\n    // Add retry logic for fetching status from Supabase\n    const maxRetries = 3;\n    let attempts = 0;\n    while(attempts < maxRetries){\n        try {\n            const dbId = getDbCompatibleId(jobId);\n            console.log(`Fetching job status for ${jobId} (dbId: ${dbId}) from Supabase (attempt ${attempts + 1})`);\n            const { data, error } = await supabase.from(\"jobs\").select(\"*\").eq(\"id\", dbId).maybeSingle();\n            if (error) {\n                console.error(\"Error retrieving job status from Supabase:\", {\n                    message: error.message,\n                    code: error.code,\n                    details: error.details,\n                    jobId,\n                    dbId,\n                    attempt: attempts + 1\n                });\n                attempts++;\n                if (attempts < maxRetries) {\n                    // Wait before retrying (exponential backoff)\n                    await new Promise((resolve)=>setTimeout(resolve, 500 * Math.pow(2, attempts)));\n                    continue;\n                }\n                // Fall back to in-memory after all retries\n                console.log(`All ${maxRetries} attempts to fetch job from Supabase failed, using in-memory data`);\n                handleSupabaseError(error);\n                return {\n                    status: memoryJob.status,\n                    result: memoryJob.result,\n                    error: memoryJob.error\n                };\n            }\n            if (!data) {\n                console.log(`Job ${jobId} not found in Supabase, using in-memory data`);\n                // Not found in DB but in memory, return memory version\n                return {\n                    status: memoryJob.status,\n                    result: memoryJob.result,\n                    error: memoryJob.error\n                };\n            }\n            console.log(`Successfully retrieved job ${jobId} status from Supabase: ${data.status}`);\n            // Update in-memory store to keep in sync\n            inMemoryJobs[jobId] = {\n                id: jobId,\n                status: data.status,\n                result: data.result,\n                error: data.error,\n                created_at: data.created_at,\n                updated_at: data.updated_at\n            };\n            return {\n                status: data.status,\n                result: data.result,\n                error: data.error\n            };\n        } catch (error) {\n            attempts++;\n            console.error(`Error fetching job status (attempt ${attempts}):`, {\n                message: error.message,\n                stack: error.stack?.substring(0, 200),\n                jobId,\n                attempt: attempts\n            });\n            if (attempts < maxRetries) {\n                // Wait before retrying (exponential backoff)\n                await new Promise((resolve)=>setTimeout(resolve, 500 * Math.pow(2, attempts)));\n                continue;\n            }\n            // All retries failed, fall back to in-memory\n            handleSupabaseError(error);\n            console.log(`Falling back to in-memory data for job ${jobId} after ${maxRetries} failed Supabase attempts`);\n            return {\n                status: memoryJob.status,\n                result: memoryJob.result,\n                error: memoryJob.error\n            };\n        }\n    }\n    // This should never be reached due to the returns in the loop, but TypeScript needs it\n    console.log(`Code reached unreachable point in getJobStatus for job ${jobId}`);\n    return {\n        status: memoryJob.status,\n        result: memoryJob.result,\n        error: memoryJob.error\n    };\n}\n// Function to create a new job\nasync function createJob(jobId) {\n    // Get a DB-compatible ID\n    const dbId = getDbCompatibleId(jobId);\n    console.log(`Creating job ${jobId} (DB ID: ${dbId})`);\n    // Always create the job in memory first for redundancy\n    inMemoryJobs[jobId] = {\n        id: jobId,\n        status: \"queued\",\n        updated_at: new Date().toISOString()\n    };\n    console.log(`Job ${jobId} created in memory`);\n    // If Supabase is disabled, just return success from in-memory storage\n    if (!shouldUseSupabase()) {\n        console.log(`Using in-memory storage only for job ${jobId}`);\n        return true;\n    }\n    try {\n        console.log(`Inserting job ${jobId} into Supabase`);\n        // Try to insert the job into Supabase\n        const { error } = await supabase.from(\"jobs\").insert({\n            id: dbId,\n            status: \"queued\",\n            created_at: new Date().toISOString(),\n            updated_at: new Date().toISOString()\n        });\n        if (error) {\n            console.error(`Error creating job ${jobId} in Supabase:`, {\n                message: error.message,\n                code: error.code,\n                details: error.details\n            });\n            // For conflicts, the job might already exist\n            if (error.code === \"23505\") {\n                console.log(`Job ${jobId} already exists in Supabase, updating status instead`);\n                // Try to update the job instead\n                const { error: updateError } = await supabase.from(\"jobs\").update({\n                    status: \"queued\",\n                    updated_at: new Date().toISOString()\n                }).eq(\"id\", dbId);\n                if (updateError) {\n                    console.error(`Error updating existing job ${jobId} in Supabase:`, updateError);\n                    // Even if update fails, we have the job in memory\n                    handleSupabaseError(updateError);\n                    return true;\n                } else {\n                    console.log(`Successfully updated job ${jobId} in Supabase`);\n                    return true;\n                }\n            }\n            // For foreign key constraint failures, try to create with minimal fields\n            if (error.code === \"23503\") {\n                console.log(`Trying simplified job creation for ${jobId}`);\n                const { error: simpleError } = await supabase.from(\"jobs\").insert({\n                    id: dbId,\n                    status: \"queued\"\n                });\n                if (simpleError) {\n                    console.error(`Simplified job creation also failed for ${jobId}:`, simpleError);\n                    handleSupabaseError(simpleError);\n                    return true; // Still return true since we have in-memory backup\n                } else {\n                    console.log(`Simplified job creation succeeded for ${jobId}`);\n                    return true;\n                }\n            }\n            // For other errors, handle gracefully and use in-memory storage as fallback\n            handleSupabaseError(error);\n            return true; // Still return true since we have in-memory backup\n        }\n        console.log(`Successfully created job ${jobId} in Supabase`);\n        return true;\n    } catch (error) {\n        console.error(`Exception while creating job ${jobId}:`, {\n            message: error.message,\n            stack: error.stack?.substring(0, 200)\n        });\n        // In case of network or other exception, we already have the job in memory\n        handleSupabaseError(error);\n        return true; // Still return true since we have in-memory backup\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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OWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcblxuLy8gRXhwbGljaXRseSBsb2cgYWxsIGVudmlyb25tZW50IHZhcmlhYmxlcyBmb3IgZGVidWdnaW5nXG5jb25zb2xlLmxvZygnTk9ERV9FTlY6JywgcHJvY2Vzcy5lbnYuTk9ERV9FTlYpO1xuY29uc29sZS5sb2coJ0Vudmlyb25tZW50IFZhcmlhYmxlcyBPdmVydmlldzonLCB7XG4gIGhhc1Byb2Nlc3NFbnY6IHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiAhIXByb2Nlc3MuZW52LFxuICBub2RlRW52OiBwcm9jZXNzLmVudi5OT0RFX0VOVixcbiAgaGFzU2JVcmw6ICdORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwnIGluIHByb2Nlc3MuZW52LFxuICBoYXNTYktleTogJ05FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZJyBpbiBwcm9jZXNzLmVudixcbiAgbmV4dENvbmZpZzogdHlwZW9mIHByb2Nlc3MuZW52Lk5FWFRfQ09ORklHX0FWQUlMQUJMRSA9PT0gJ3N0cmluZycsXG4gIGVudlZhckNvdW50OiBPYmplY3Qua2V5cyhwcm9jZXNzLmVudikuZmlsdGVyKGtleSA9PiBrZXkuc3RhcnRzV2l0aCgnTkVYVF8nKSkubGVuZ3RoXG59KTtcblxuLy8gU3VwYWJhc2UgY2xpZW50IHNldHVwXG4vLyBEaXJlY3RseSBhY2Nlc3MgdmFyaWFibGVzIGZvciBkZWJ1Z2dpbmcgcmF0aGVyIHRoYW4gdXNpbmcgfHwgJycgcGF0dGVybiBpbml0aWFsbHlcbmxldCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTDtcbmxldCBzdXBhYmFzZUFub25LZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTtcblxuLy8gRGVidWcgU3VwYWJhc2Ugc2V0dXAgd2l0aG91dCBleHBvc2luZyBrZXlzXG5jb25zb2xlLmxvZygnRGlyZWN0IFN1cGFiYXNlIFVSTDonLCBzdXBhYmFzZVVybD8uc3Vic3RyaW5nKDAsIDEyKSArICcuLi4nIHx8ICd1bmRlZmluZWQnKTtcbmNvbnNvbGUubG9nKCdEaXJlY3QgU3VwYWJhc2UgS2V5OicsIHN1cGFiYXNlQW5vbktleT8uc3Vic3RyaW5nKDAsIDYpICsgJy4uLicgfHwgJ3VuZGVmaW5lZCcpO1xuXG4vLyBGYWxsYmFjayB0byBlbXB0eSBzdHJpbmcgaWYgdW5kZWZpbmVkXG5zdXBhYmFzZVVybCA9IHN1cGFiYXNlVXJsIHx8ICcnO1xuc3VwYWJhc2VBbm9uS2V5ID0gc3VwYWJhc2VBbm9uS2V5IHx8ICcnO1xuXG4vLyBEZWJ1ZyBTdXBhYmFzZSBzZXR1cCB3aXRob3V0IGV4cG9zaW5nIGtleXNcbmNvbnNvbGUubG9nKCdTdXBhYmFzZSBjb25maWd1cmF0aW9uIGNoZWNrOicsIHtcbiAgaGFzVXJsOiBCb29sZWFuKHN1cGFiYXNlVXJsKSxcbiAgdXJsTGVuZ3RoOiBzdXBhYmFzZVVybD8ubGVuZ3RoIHx8IDAsXG4gIHVybFByZWZpeDogc3VwYWJhc2VVcmw/LnN1YnN0cmluZygwLCA4KSB8fCAnJyxcbiAgaGFzS2V5OiBCb29sZWFuKHN1cGFiYXNlQW5vbktleSksXG4gIGtleUxlbmd0aDogc3VwYWJhc2VBbm9uS2V5Py5sZW5ndGggfHwgMCxcbiAga2V5UHJlZml4OiBzdXBhYmFzZUFub25LZXk/LnN1YnN0cmluZygwLCA0KSB8fCAnJ1xufSk7XG5cbi8vIFR5cGUgZGVmaW5pdGlvbiBmb3Igam9iIGRhdGFcbmV4cG9ydCB0eXBlIEpvYkRhdGEgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIHN0YXR1czogJ3F1ZXVlZCcgfCAncHJvY2Vzc2luZycgfCAnY29tcGxldGVkJyB8ICdmYWlsZWQnO1xuICByZXN1bHQ/OiBhbnk7XG4gIGVycm9yPzogc3RyaW5nO1xuICBjcmVhdGVkX2F0Pzogc3RyaW5nO1xuICB1cGRhdGVkX2F0OiBzdHJpbmc7XG59O1xuXG4vLyBDaGVjayBpZiBTdXBhYmFzZSBpcyBjb25maWd1cmVkIHByb3Blcmx5XG5jb25zdCBpc1N1cGFiYXNlQ29uZmlndXJlZCA9IEJvb2xlYW4oc3VwYWJhc2VVcmwgJiYgc3VwYWJhc2VBbm9uS2V5KTtcblxuLy8gSW4tbWVtb3J5IHN0b3JlIHRvIHRyYWNrIGlmIFN1cGFiYXNlIGNvbm5lY3Rpdml0eSBmYWlsZWQgZHVyaW5nIHJ1bnRpbWVcbmxldCBzdXBhYmFzZURpc2FibGVkID0gZmFsc2U7XG5cbi8vIEluaXRpYWxpemUgdGhlIFN1cGFiYXNlIGNsaWVudCB3aXRoIGV4cGxpY2l0IG9wdGlvbnMgZm9yIGJldHRlciByZWxpYWJpbGl0eVxuZXhwb3J0IGNvbnN0IHN1cGFiYXNlID0gaXNTdXBhYmFzZUNvbmZpZ3VyZWRcbiAgPyBjcmVhdGVDbGllbnQoc3VwYWJhc2VVcmwsIHN1cGFiYXNlQW5vbktleSwge1xuICAgICAgYXV0aDoge1xuICAgICAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2UsXG4gICAgICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxuICAgICAgfSxcbiAgICAgIGdsb2JhbDoge1xuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGRiOiB7XG4gICAgICAgIHNjaGVtYTogJ3B1YmxpYydcbiAgICAgIH1cbiAgICB9KVxuICA6IGNyZWF0ZUNsaWVudCgnaHR0cHM6Ly9wbGFjZWhvbGRlci11cmwuc3VwYWJhc2UuY28nLCAncGxhY2Vob2xkZXIta2V5Jywge1xuICAgICAgYXV0aDoge1xuICAgICAgICBwZXJzaXN0U2Vzc2lvbjogZmFsc2UsXG4gICAgICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxuICAgICAgfSxcbiAgICB9KTtcblxuLy8gTG9nIGluaXRpYWxpemF0aW9uIHN0YXR1c1xuaWYgKCFpc1N1cGFiYXNlQ29uZmlndXJlZCkge1xuICBjb25zb2xlLmxvZygnU3VwYWJhc2Ugbm90IHByb3Blcmx5IGNvbmZpZ3VyZWQuIFVzaW5nIGluLW1lbW9yeSBqb2Igc3RvcmFnZSBhcyBmYWxsYmFjay4nKTtcbn0gZWxzZSB7XG4gIGNvbnNvbGUubG9nKCdTdXBhYmFzZSBjbGllbnQgaW5pdGlhbGl6ZWQsIHZlcmlmeWluZyBjb25uZWN0aW9uLi4uJyk7XG4gIC8vIEF0dGVtcHQgdG8gdmVyaWZ5IGNvbm5lY3Rpb24gYW5kIGVuc3VyZSB0aGUgam9icyB0YWJsZSBleGlzdHNcbiAgdmVyaWZ5U3VwYWJhc2VDb25uZWN0aW9uKCkuY2F0Y2goZXJyID0+IHtcbiAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byB2ZXJpZnkgU3VwYWJhc2UgY29ubmVjdGlvbjonLCBlcnIubWVzc2FnZSk7XG4gIH0pO1xufVxuXG4vLyBJbi1tZW1vcnkgZmFsbGJhY2sgc3RvcmUgZm9yIGRldmVsb3BtZW50IG9yIHdoZW4gU3VwYWJhc2UgaXNuJ3QgY29uZmlndXJlZFxuY29uc3QgaW5NZW1vcnlKb2JzOiBSZWNvcmQ8c3RyaW5nLCBKb2JEYXRhPiA9IHt9O1xuXG4vLyBGdW5jdGlvbiB0byB2ZXJpZnkgdGhlIFN1cGFiYXNlIGNvbm5lY3Rpb25cbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeVN1cGFiYXNlQ29ubmVjdGlvbigpIHtcbiAgaWYgKCFpc1N1cGFiYXNlQ29uZmlndXJlZCkgcmV0dXJuO1xuICBcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnQ2hlY2tpbmcgU3VwYWJhc2UgY29ubmVjdGlvbi4uLicpO1xuICAgIFxuICAgIC8vIEZpcnN0IHRyeSB0byBkaXJlY3RseSBxdWVyeSBpZiB0aGUgam9icyB0YWJsZSBleGlzdHNcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2pvYnMnKVxuICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAubGltaXQoMSk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICAvLyBUYWJsZSBtaWdodCBub3QgZXhpc3RcbiAgICAgIGlmIChlcnJvci5jb2RlID09PSAnNDJQMDEnKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdKb2JzIHRhYmxlIGRvZXMgbm90IGV4aXN0LCB3aWxsIGF0dGVtcHQgdG8gY3JlYXRlIGl0Jyk7XG4gICAgICAgIGF3YWl0IGVuc3VyZUpvYnNUYWJsZUV4aXN0cygpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignU3VwYWJhc2UgY29ubmVjdGlvbiB2ZXJpZmljYXRpb24gZmFpbGVkOicsIHtcbiAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICAgICAgZGV0YWlsczogZXJyb3IuZGV0YWlsc1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coJ1N1cGFiYXNlIGNvbm5lY3Rpb24gdmVyaWZpZWQgc3VjY2Vzc2Z1bGx5LCBqb2JzIHRhYmxlIGV4aXN0cycpO1xuICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgdGhlIHJpZ2h0IGNvbHVtbnNcbiAgICAgIGF3YWl0IGNoZWNrVGFibGVTdHJ1Y3R1cmUoZGF0YSk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdmVyaWZ5aW5nIFN1cGFiYXNlIGNvbm5lY3Rpb246Jywge1xuICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgIHN0YWNrOiBlcnJvci5zdGFjaz8uc3Vic3RyaW5nKDAsIDIwMClcbiAgICB9KTtcbiAgICBcbiAgICAvLyBJZiB0aGlzIGlzIGEgbmV0d29yayBlcnJvciwgZGlzYWJsZSBTdXBhYmFzZVxuICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnZmV0Y2ggZmFpbGVkJykgfHwgXG4gICAgICAgIGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCduZXR3b3JrIGVycm9yJykgfHxcbiAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBUeXBlRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUud2FybignRGlzYWJsaW5nIFN1cGFiYXNlIGR1ZSB0byBjb25uZWN0aW9uIGlzc3VlcycpO1xuICAgICAgc3VwYWJhc2VEaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuICB9XG59XG5cbi8vIENoZWNrIGFuZCBhZGFwdCB0byBleGlzdGluZyB0YWJsZSBzdHJ1Y3R1cmVcbmFzeW5jIGZ1bmN0aW9uIGNoZWNrVGFibGVTdHJ1Y3R1cmUoc2FtcGxlRGF0YTogYW55W10pIHtcbiAgaWYgKHNhbXBsZURhdGEgJiYgc2FtcGxlRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgLy8gTG9nIHRoZSBzdHJ1Y3R1cmUgd2UgZm91bmQgZm9yIGRlYnVnZ2luZ1xuICAgIGNvbnN0IGZpcnN0Um93ID0gc2FtcGxlRGF0YVswXTtcbiAgICBjb25zb2xlLmxvZygnRm91bmQgZXhpc3Rpbmcgam9icyB0YWJsZSB3aXRoIGNvbHVtbnM6JywgT2JqZWN0LmtleXMoZmlyc3RSb3cpLmpvaW4oJywgJykpO1xuICB9XG59XG5cbi8vIEZ1bmN0aW9uIHRvIGNoZWNrIGFuZCBjcmVhdGUgdGhlIGpvYnMgdGFibGUgaWYgaXQgZG9lc24ndCBleGlzdFxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlSm9ic1RhYmxlRXhpc3RzKCkge1xuICBpZiAoIWlzU3VwYWJhc2VDb25maWd1cmVkKSByZXR1cm47XG4gIFxuICB0cnkge1xuICAgIGNvbnNvbGUubG9nKCdBdHRlbXB0aW5nIHRvIGNyZWF0ZSBqb2JzIHRhYmxlLi4uJyk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBwZXJtaXNzaW9uIHRvIGV4ZWN1dGUgU1FMXG4gICAgdHJ5IHtcbiAgICAgIC8vIEZpcnN0LCB0cnkgdG8gY3JlYXRlIGEgc2ltcGxlIHRhYmxlIHdpdGggdGhlIG1pbmltdW0gcmVxdWlyZWQgZmllbGRzXG4gICAgICBjb25zdCBjcmVhdGVUYWJsZVNRTCA9IGBcbiAgICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgam9icyAoXG4gICAgICAgICAgaWQgQklHSU5UIFBSSU1BUlkgS0VZLFxuICAgICAgICAgIHN0YXR1cyBURVhULFxuICAgICAgICAgIHJlc3VsdCBKU09OQixcbiAgICAgICAgICBlcnJvciBURVhULFxuICAgICAgICAgIGNyZWF0ZWRfYXQgVElNRVNUQU1QIFdJVEggVElNRSBaT05FIERFRkFVTFQgTk9XKCksXG4gICAgICAgICAgdXBkYXRlZF9hdCBUSU1FU1RBTVAgV0lUSCBUSU1FIFpPTkUgREVGQVVMVCBOT1coKVxuICAgICAgICApO1xuICAgICAgYDtcbiAgICAgIFxuICAgICAgY29uc3QgeyBlcnJvcjogY3JlYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYygnZXhlY3V0ZV9zcWwnLCB7IHNxbDogY3JlYXRlVGFibGVTUUwgfSk7XG4gICAgICBcbiAgICAgIGlmIChjcmVhdGVFcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gY3JlYXRlIGpvYnMgdGFibGUgdmlhIFNRTDonLCBjcmVhdGVFcnJvcik7XG4gICAgICAgIFxuICAgICAgICAvLyBUcnkgYW4gYWx0ZXJuYXRpdmUgYXBwcm9hY2ggLSB1c2luZyB0aGUgaW5zZXJ0IEFQSVxuICAgICAgICBjb25zb2xlLmxvZygnVHJ5aW5nIHRvIGNyZWF0ZSBqb2JzIHRhYmxlIHZpYSBpbnNlcnQuLi4nKTtcbiAgICAgICAgY29uc3QgeyBlcnJvcjogaW5zZXJ0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ2pvYnMnKVxuICAgICAgICAgIC5pbnNlcnQoe1xuICAgICAgICAgICAgaWQ6IDAsXG4gICAgICAgICAgICBzdGF0dXM6ICd0ZXN0JyxcbiAgICAgICAgICAgIHJlc3VsdDogbnVsbCxcbiAgICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICAgICAgY3JlYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgIGlmIChpbnNlcnRFcnJvcikge1xuICAgICAgICAgIC8vIElmIFN1cGFiYXNlIGRvZXNuJ3QgbGV0IHVzIGNyZWF0ZSB0aGUgdGFibGUsIGxvZyB3aGF0IG5lZWRzIHRvIGJlIGNyZWF0ZWRcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdDYW5ub3QgY3JlYXRlIGpvYnMgdGFibGUgYXV0b21hdGljYWxseTonLCBpbnNlcnRFcnJvcik7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignUGxlYXNlIGNyZWF0ZSB0aGUgam9icyB0YWJsZSBtYW51YWxseSB3aXRoIHRoaXMgU1FMOicpO1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY3JlYXRlVGFibGVTUUwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdKb2JzIHRhYmxlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IHRocm91Z2ggaW5zZXJ0Jyk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2xlYW4gdXAgdGVzdCByZWNvcmRcbiAgICAgICAgICBhd2FpdCBzdXBhYmFzZS5mcm9tKCdqb2JzJykuZGVsZXRlKCkuZXEoJ2lkJywgMCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdKb2JzIHRhYmxlIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5IHRocm91Z2ggU1FMJyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoc3FsRXJyb3I6IGFueSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZXhlY3V0aW5nIFNRTDonLCBzcWxFcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbnN1cmluZyBqb2JzIHRhYmxlIGV4aXN0czonLCBlcnJvci5tZXNzYWdlKTtcbiAgICAvLyBUaGlzIGVycm9yIGlzIGhhbmRsZWQgZ3JhY2VmdWxseSwgd2UnbGwganVzdCB1c2UgaW4tbWVtb3J5IHN0b3JhZ2VcbiAgfVxufVxuXG4vLyBDb252ZXJ0IHN0cmluZyBJRCB0byBhIG51bWVyaWMgaGFzaCBpZiBuZWVkZWQgZm9yIFN1cGFiYXNlIGNvbXBhdGliaWxpdHlcbmZ1bmN0aW9uIGdldERiQ29tcGF0aWJsZUlkKGlkOiBzdHJpbmcpOiBudW1iZXIge1xuICAvLyBJZiB0aGUgSUQgaXMgYWxyZWFkeSBudW1lcmljLCByZXR1cm4gaXQgYXMgaXNcbiAgaWYgKCFpc05hTihOdW1iZXIoaWQpKSkge1xuICAgIHJldHVybiBOdW1iZXIoaWQpO1xuICB9XG4gIFxuICAvLyBGb3Igam9iIElEcyB0aGF0IHN0YXJ0IHdpdGggYSB0aW1lc3RhbXAgKGpvYl8gb3IgZGVidWdfKSwgZXh0cmFjdCB0aGUgdGltZXN0YW1wXG4gIC8vIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IElEIGdlbmVyYXRpb24gYWNyb3NzIGVudmlyb25tZW50c1xuICBjb25zdCB0aW1lc3RhbXBNYXRjaCA9IGlkLm1hdGNoKC9eKGpvYnxkZWJ1Z3x0ZXN0KV8oXFxkKykvKTtcbiAgaWYgKHRpbWVzdGFtcE1hdGNoICYmICFpc05hTihOdW1iZXIodGltZXN0YW1wTWF0Y2hbMl0pKSkge1xuICAgIC8vIFVzZSB0aGUgdGltZXN0YW1wIHBvcnRpb24gYXMgdGhlIG51bWVyaWMgSURcbiAgICByZXR1cm4gTnVtYmVyKHRpbWVzdGFtcE1hdGNoWzJdKTtcbiAgfVxuXG4gIC8vIEZvciBhbnkgb3RoZXIgSURzLCB1c2UgYSBoYXNoIGZ1bmN0aW9uIHRvIGdlbmVyYXRlIGEgbnVtZXJpYyBJRFxuICAvLyBUaGlzIGlzIHVzZWZ1bCBmb3Igbm9uLXN0YW5kYXJkIGpvYiBJRHNcbiAgbGV0IGhhc2ggPSAwO1xuICBjb25zdCBwcmltZSA9IDMxOyAvLyBVc2UgYSBwcmltZSBudW1iZXIgZm9yIGJldHRlciBkaXN0cmlidXRpb25cbiAgXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaWQubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBHZXQgdGhlIGNoYXJhY3RlciBjb2RlXG4gICAgY29uc3QgY2hhciA9IGlkLmNoYXJDb2RlQXQoaSk7XG4gICAgLy8gTXVsdGlwbHkgdGhlIGN1cnJlbnQgaGFzaCBieSB0aGUgcHJpbWUgYW5kIGFkZCB0aGUgY2hhcmFjdGVyIGNvZGVcbiAgICBoYXNoID0gTWF0aC5pbXVsKGhhc2gsIHByaW1lKSArIGNoYXIgfCAwO1xuICB9XG4gIFxuICAvLyBFbnN1cmUgcG9zaXRpdmUgbnVtYmVyIGJ5IHVzaW5nIGFic29sdXRlIHZhbHVlIGFuZCBtYWtlIGl0IGxhcmdlIGVub3VnaCB0byBhdm9pZCBjb2xsaXNpb25zXG4gIHJldHVybiBNYXRoLmFicyhoYXNoKTtcbn1cblxuLy8gQ2hlY2sgaWYgU3VwYWJhc2Ugc2hvdWxkIGJlIHVzZWRcbmZ1bmN0aW9uIHNob3VsZFVzZVN1cGFiYXNlKCk6IGJvb2xlYW4ge1xuICByZXR1cm4gaXNTdXBhYmFzZUNvbmZpZ3VyZWQgJiYgIXN1cGFiYXNlRGlzYWJsZWQ7XG59XG5cbi8vIEhhbmRsZSBTdXBhYmFzZSBlcnJvcnMgY29uc2lzdGVudGx5XG5mdW5jdGlvbiBoYW5kbGVTdXBhYmFzZUVycm9yKGVycm9yOiBhbnkpOiB2b2lkIHtcbiAgY29uc29sZS5lcnJvcignU3VwYWJhc2Ugb3BlcmF0aW9uIGZhaWxlZDonLCB7XG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICBuYW1lOiBlcnJvci5uYW1lLFxuICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgaGludDogZXJyb3IuaGludCxcbiAgICBkZXRhaWxzOiBlcnJvci5kZXRhaWxzLFxuICAgIGlzVHlwZUVycm9yOiBlcnJvciBpbnN0YW5jZW9mIFR5cGVFcnJvclxuICB9KTtcbiAgXG4gIC8vIElmIHdlIGdldCBhIGZldGNoIGVycm9yLCBkaXNhYmxlIFN1cGFiYXNlIGZvciB0aGlzIHNlc3Npb25cbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgVHlwZUVycm9yICYmIFxuICAgICAgKGVycm9yLm1lc3NhZ2U/LmluY2x1ZGVzKCdmZXRjaCBmYWlsZWQnKSB8fCBlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnbmV0d29yayBlcnJvcicpKSkge1xuICAgIGNvbnNvbGUud2FybignRGlzYWJsaW5nIFN1cGFiYXNlIGR1ZSB0byBjb25uZWN0aXZpdHkgaXNzdWVzLiBVc2luZyBpbi1tZW1vcnkgc3RvcmFnZSBhcyBmYWxsYmFjay4nKTtcbiAgICBzdXBhYmFzZURpc2FibGVkID0gdHJ1ZTtcbiAgfVxufVxuXG4vLyBGdW5jdGlvbiB0byBjcmVhdGUgb3IgdXBkYXRlIGEgam9iXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlSm9iU3RhdHVzKFxuICBqb2JJZDogc3RyaW5nLCBcbiAgc3RhdHVzOiBzdHJpbmcsIFxuICBkYXRhPzogeyByZXN1bHQ/OiBhbnk7IGVycm9yPzogc3RyaW5nIH1cbik6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAvLyBDcmVhdGUgaW4tbWVtb3J5IGZhbGxiYWNrIGVudHJ5XG4gIGNvbnN0IG1lbW9yeUpvYjogSm9iRGF0YSA9IHtcbiAgICBpZDogam9iSWQsXG4gICAgc3RhdHVzOiBzdGF0dXMgYXMgYW55LFxuICAgIHJlc3VsdDogZGF0YT8ucmVzdWx0IHx8IHVuZGVmaW5lZCxcbiAgICBlcnJvcjogZGF0YT8uZXJyb3IgfHwgdW5kZWZpbmVkLFxuICAgIGNyZWF0ZWRfYXQ6IGluTWVtb3J5Sm9ic1tqb2JJZF0/LmNyZWF0ZWRfYXQgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICB9O1xuXG4gIC8vIFNhdmUgdG8gaW4tbWVtb3J5IHN0b3JlXG4gIGluTWVtb3J5Sm9ic1tqb2JJZF0gPSBtZW1vcnlKb2I7XG5cbiAgLy8gSWYgd2Ugc2hvdWxkbid0IHVzZSBTdXBhYmFzZSwgcmV0dXJuIGVhcmx5IHdpdGggc3VjY2Vzc1xuICBpZiAoIXNob3VsZFVzZVN1cGFiYXNlKCkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgZGJJZCA9IGdldERiQ29tcGF0aWJsZUlkKGpvYklkKTtcbiAgICBcbiAgICAvLyBFbnN1cmUgcmVzdWx0IGlzIHByb3Blcmx5IHNlcmlhbGl6ZWQgYmVmb3JlIHNlbmRpbmcgdG8gU3VwYWJhc2VcbiAgICBsZXQgc2FmZVJlc3VsdCA9IG51bGw7XG4gICAgaWYgKGRhdGE/LnJlc3VsdCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gTG9nIGNvb3JkaW5hdGVzIGJlZm9yZSBzZXJpYWxpemF0aW9uIGlmIHRoZXkgZXhpc3RcbiAgICAgICAgaWYgKGRhdGEucmVzdWx0Py5pdGluZXJhcnk/LmRheXMpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnQ2hlY2tpbmcgY29vcmRpbmF0ZXMgYmVmb3JlIHNlcmlhbGl6YXRpb24uLi4nKTtcbiAgICAgICAgICBjb25zdCBkYXlzID0gZGF0YS5yZXN1bHQuaXRpbmVyYXJ5LmRheXM7XG4gICAgICAgICAgbGV0IGhhc0Nvb3JkaW5hdGVJc3N1ZXMgPSBmYWxzZTtcbiAgICAgICAgICBcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRheXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IGRheSA9IGRheXNbaV07XG4gICAgICAgICAgICBpZiAoZGF5LmFjdGl2aXRpZXMgJiYgQXJyYXkuaXNBcnJheShkYXkuYWN0aXZpdGllcykpIHtcbiAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBkYXkuYWN0aXZpdGllcy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2aXR5ID0gZGF5LmFjdGl2aXRpZXNbal07XG4gICAgICAgICAgICAgICAgaWYgKCFhY3Rpdml0eS5jb29yZGluYXRlcyB8fCB0eXBlb2YgYWN0aXZpdHkuY29vcmRpbmF0ZXMgIT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBNaXNzaW5nIGNvb3JkaW5hdGVzIGluIGRheSAke2l9LCBhY3Rpdml0eSAke2p9OiAke2FjdGl2aXR5LnRpdGxlfWApO1xuICAgICAgICAgICAgICAgICAgaGFzQ29vcmRpbmF0ZUlzc3VlcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIGlmIChhY3Rpdml0eS5jb29yZGluYXRlcy5sYXQgPT09IHVuZGVmaW5lZCB8fCBhY3Rpdml0eS5jb29yZGluYXRlcy5sbmcgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBJbmNvbXBsZXRlIGNvb3JkaW5hdGVzIGluIGRheSAke2l9LCBhY3Rpdml0eSAke2p9OiAke0pTT04uc3RyaW5naWZ5KGFjdGl2aXR5LmNvb3JkaW5hdGVzKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgaGFzQ29vcmRpbmF0ZUlzc3VlcyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGlmICghaGFzQ29vcmRpbmF0ZUlzc3Vlcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ0FsbCBjb29yZGluYXRlcyBsb29rIHZhbGlkIGJlZm9yZSBzZXJpYWxpemF0aW9uJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBUZXN0IHNlcmlhbGl6YXRpb24gZmlyc3QgdG8gY2F0Y2ggYW55IGlzc3Vlc1xuICAgICAgICBKU09OLnN0cmluZ2lmeShkYXRhLnJlc3VsdCk7XG4gICAgICAgIHNhZmVSZXN1bHQgPSBkYXRhLnJlc3VsdDtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNlcmlhbGl6ZSBqb2IgcmVzdWx0IHRvIEpTT046JywgZSk7XG4gICAgICAgIHNhZmVSZXN1bHQgPSB7IGVycm9yOiAnUmVzdWx0IGNvbnRhaW5lZCB1bnNlcmlhbGl6YWJsZSBkYXRhJyB9O1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhgVXBkYXRpbmcgam9iICR7am9iSWR9IChkYklkOiAke2RiSWR9KSBzdGF0dXMgdG8gJHtzdGF0dXN9YCk7XG4gICAgXG4gICAgLy8gRmlyc3QsIGdldCB0aGUgY3VycmVudCBqb2IgdG8gcHJlc2VydmUgY3JlYXRlZF9hdFxuICAgIGxldCBjcmVhdGVkX2F0ID0gbWVtb3J5Sm9iLmNyZWF0ZWRfYXQ7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdKb2IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKCdqb2JzJylcbiAgICAgICAgLnNlbGVjdCgnY3JlYXRlZF9hdCcpXG4gICAgICAgIC5lcSgnaWQnLCBkYklkKVxuICAgICAgICAuc2luZ2xlKCk7XG4gICAgICBcbiAgICAgIGlmIChleGlzdGluZ0pvYj8uY3JlYXRlZF9hdCkge1xuICAgICAgICBjcmVhdGVkX2F0ID0gZXhpc3RpbmdKb2IuY3JlYXRlZF9hdDtcbiAgICAgICAgY29uc29sZS5sb2coYFVzaW5nIGV4aXN0aW5nIGNyZWF0ZWRfYXQgdGltZXN0YW1wOiAke2NyZWF0ZWRfYXR9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhgTm8gZXhpc3RpbmcgY3JlYXRlZF9hdCBmb3VuZCwgdXNpbmcgZGVmYXVsdCBjcmVhdGVkX2F0OiAke2NyZWF0ZWRfYXR9YCk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICBjb25zb2xlLmxvZyhgQ291bGQgbm90IGZldGNoIGV4aXN0aW5nIGpvYiwgdXNpbmcgZGVmYXVsdCBjcmVhdGVkX2F0OiAke2NyZWF0ZWRfYXR9YCk7XG4gICAgfVxuICAgIFxuICAgIC8vIE5vdyB1cGRhdGUgd2l0aCB0aGUgcHJlc2VydmVkIGNyZWF0ZWRfYXRcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2pvYnMnKVxuICAgICAgLnVwc2VydCh7XG4gICAgICAgIGlkOiBkYklkLFxuICAgICAgICBzdGF0dXMsXG4gICAgICAgIHJlc3VsdDogc2FmZVJlc3VsdCxcbiAgICAgICAgZXJyb3I6IGRhdGE/LmVycm9yIHx8IG51bGwsXG4gICAgICAgIGNyZWF0ZWRfYXQ6IGNyZWF0ZWRfYXQsXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSwge1xuICAgICAgICBvbkNvbmZsaWN0OiAnaWQnXG4gICAgICB9KTtcblxuICAgIGlmIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgam9iIHN0YXR1cyBpbiBTdXBhYmFzZTonLCB7XG4gICAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIGRldGFpbHM6IGVycm9yLmRldGFpbHMsXG4gICAgICAgIGpvYklkLFxuICAgICAgICBkYklkLFxuICAgICAgICBzdGF0dXNcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhgU3VjY2Vzc2Z1bGx5IHVwZGF0ZWQgam9iICR7am9iSWR9IGluIFN1cGFiYXNlYCk7XG4gICAgfVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IpO1xuICB9XG4gIFxuICAvLyBBbHdheXMgcmV0dXJuIHRydWUgc2luY2Ugd2Ugc2F2ZWQgdG8gaW4tbWVtb3J5IHN0b3JhZ2VcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8vIEdldCB0aGUgc3RhdHVzIG9mIGEgam9iXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Sm9iU3RhdHVzKGpvYklkOiBzdHJpbmcpOiBQcm9taXNlPHsgc3RhdHVzOiBzdHJpbmc7IHJlc3VsdD86IGFueTsgZXJyb3I/OiBzdHJpbmcgfT4ge1xuICAvLyBFbmhhbmNlZCBsb2dnaW5nIGZvciB0cm91Ymxlc2hvb3RpbmdcbiAgY29uc29sZS5sb2coYD09PT09PT09PT0gSk9CIFNUQVRVUyBDSEVDSyA9PT09PT09PT09YCk7XG4gIGNvbnNvbGUubG9nKGBnZXRKb2JTdGF0dXMgY2FsbGVkIGZvciBqb2I6ICR7am9iSWR9YCk7XG4gIGNvbnNvbGUubG9nKGBFbnZpcm9ubWVudDogJHtwcm9jZXNzLmVudi5OT0RFX0VOVn1gKTtcbiAgY29uc29sZS5sb2coYFN1cGFiYXNlIGNvbmZpZ3VyZWQ6ICR7aXNTdXBhYmFzZUNvbmZpZ3VyZWR9YCk7XG4gIGNvbnNvbGUubG9nKGBTdXBhYmFzZSBkaXNhYmxlZCBmbGFnOiAke3N1cGFiYXNlRGlzYWJsZWR9YCk7XG4gIGNvbnNvbGUubG9nKGBzaG91bGRVc2VTdXBhYmFzZSgpOiAke3Nob3VsZFVzZVN1cGFiYXNlKCl9YCk7XG4gIFxuICAvLyBDaGVjayBpbi1tZW1vcnkgc3RvcmFnZSBmaXJzdFxuICBjb25zdCBtZW1vcnlKb2IgPSBpbk1lbW9yeUpvYnNbam9iSWRdO1xuICBcbiAgLy8gTG9nIGluLW1lbW9yeSBqb2Igc3RhdHVzXG4gIGNvbnNvbGUubG9nKGBJbi1tZW1vcnkgam9iIHN0YXR1cyBmb3IgJHtqb2JJZH06ICR7bWVtb3J5Sm9iID8gbWVtb3J5Sm9iLnN0YXR1cyA6ICdub3QgZm91bmQnfWApO1xuICBjb25zb2xlLmxvZyhgSW4tbWVtb3J5IGpvYnMgY291bnQ6ICR7T2JqZWN0LmtleXMoaW5NZW1vcnlKb2JzKS5sZW5ndGh9YCk7XG4gIGNvbnNvbGUubG9nKGBBbGwgaW4tbWVtb3J5IGpvYiBJRHM6ICR7T2JqZWN0LmtleXMoaW5NZW1vcnlKb2JzKS5qb2luKCcsICcpLnN1YnN0cmluZygwLCAyMDApfWApO1xuICBcbiAgLy8gTm90IGV2ZW4gaW4gbWVtb3J5XG4gIGlmICghbWVtb3J5Sm9iKSB7XG4gICAgY29uc29sZS5sb2coYEpvYiAke2pvYklkfSBub3QgZm91bmQgaW4gbWVtb3J5LCB3aWxsIGNoZWNrIFN1cGFiYXNlIGlmIGF2YWlsYWJsZWApO1xuICAgIFxuICAgIC8vIElmIFN1cGFiYXNlIGlzIHByb3Blcmx5IGNvbmZpZ3VyZWQgYW5kIG5vdCBkaXNhYmxlZCwgdHJ5IHRvIGZldGNoIGZyb20gdGhlcmVcbiAgICBpZiAoc2hvdWxkVXNlU3VwYWJhc2UoKSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGJJZCA9IGdldERiQ29tcGF0aWJsZUlkKGpvYklkKTtcbiAgICAgICAgY29uc29sZS5sb2coYENoZWNraW5nIFN1cGFiYXNlIGZvciBqb2IgJHtqb2JJZH0gKERCIElEOiAke2RiSWR9KWApO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbSgnam9icycpXG4gICAgICAgICAgLnNlbGVjdCgnKicpXG4gICAgICAgICAgLmVxKCdpZCcsIGRiSWQpXG4gICAgICAgICAgLm1heWJlU2luZ2xlKCk7XG4gICAgICAgICAgXG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFN1cGFiYXNlIGVycm9yIGNoZWNraW5nIGZvciBqb2IgJHtqb2JJZH06YCwge1xuICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICAgIGNvZGU6IGVycm9yLmNvZGUsXG4gICAgICAgICAgICBkZXRhaWxzOiBlcnJvci5kZXRhaWxzXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiAnbm90X2ZvdW5kJyB9O1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgSm9iICR7am9iSWR9IG5vdCBmb3VuZCBpbiBTdXBhYmFzZSBlaXRoZXJgKTtcbiAgICAgICAgICByZXR1cm4geyBzdGF0dXM6ICdub3RfZm91bmQnIH07XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCBqb2IgJHtqb2JJZH0gaW4gU3VwYWJhc2Ugd2l0aCBzdGF0dXM6ICR7ZGF0YS5zdGF0dXN9YCk7XG4gICAgICAgIC8vIFN0b3JlIGluIG1lbW9yeSBmb3IgZnV0dXJlIHF1aWNrIGFjY2Vzc1xuICAgICAgICBpbk1lbW9yeUpvYnNbam9iSWRdID0ge1xuICAgICAgICAgIGlkOiBqb2JJZCxcbiAgICAgICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzLFxuICAgICAgICAgIHJlc3VsdDogZGF0YS5yZXN1bHQsXG4gICAgICAgICAgZXJyb3I6IGRhdGEuZXJyb3IsXG4gICAgICAgICAgY3JlYXRlZF9hdDogZGF0YS5jcmVhdGVkX2F0LFxuICAgICAgICAgIHVwZGF0ZWRfYXQ6IGRhdGEudXBkYXRlZF9hdFxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzLFxuICAgICAgICAgIHJlc3VsdDogZGF0YS5yZXN1bHQsXG4gICAgICAgICAgZXJyb3I6IGRhdGEuZXJyb3JcbiAgICAgICAgfTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXhjZXB0aW9uIGNoZWNraW5nIFN1cGFiYXNlIGZvciBqb2IgJHtqb2JJZH06YCwge1xuICAgICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgICAgc3RhY2s6IGVycm9yLnN0YWNrPy5zdWJzdHJpbmcoMCwgMjAwKVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiAnbm90X2ZvdW5kJyB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhgU3VwYWJhc2Ugbm90IGF2YWlsYWJsZSwgam9iICR7am9iSWR9IGlzIG5vdCBmb3VuZGApO1xuICAgICAgcmV0dXJuIHsgc3RhdHVzOiAnbm90X2ZvdW5kJyB9O1xuICAgIH1cbiAgfVxuICBcbiAgLy8gSWYgU3VwYWJhc2UgaXMgZGlzYWJsZWQgb3IgaW1wcm9wZXJseSBjb25maWd1cmVkLCBvbmx5IHVzZSBpbi1tZW1vcnkgc3RvcmFnZVxuICBpZiAoIXNob3VsZFVzZVN1cGFiYXNlKCkpIHtcbiAgICBjb25zb2xlLmxvZyhgVXNpbmcgaW4tbWVtb3J5IGRhdGEgZm9yIGpvYiAke2pvYklkfSAoU3VwYWJhc2Ugbm90IGF2YWlsYWJsZSlgKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhdHVzOiBtZW1vcnlKb2Iuc3RhdHVzLFxuICAgICAgcmVzdWx0OiBtZW1vcnlKb2IucmVzdWx0LFxuICAgICAgZXJyb3I6IG1lbW9yeUpvYi5lcnJvclxuICAgIH07XG4gIH1cbiAgXG4gIC8vIEFkZCByZXRyeSBsb2dpYyBmb3IgZmV0Y2hpbmcgc3RhdHVzIGZyb20gU3VwYWJhc2VcbiAgY29uc3QgbWF4UmV0cmllcyA9IDM7XG4gIGxldCBhdHRlbXB0cyA9IDA7XG4gIFxuICB3aGlsZSAoYXR0ZW1wdHMgPCBtYXhSZXRyaWVzKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRiSWQgPSBnZXREYkNvbXBhdGlibGVJZChqb2JJZCk7XG4gICAgICBjb25zb2xlLmxvZyhgRmV0Y2hpbmcgam9iIHN0YXR1cyBmb3IgJHtqb2JJZH0gKGRiSWQ6ICR7ZGJJZH0pIGZyb20gU3VwYWJhc2UgKGF0dGVtcHQgJHthdHRlbXB0cyArIDF9KWApO1xuICAgICAgXG4gICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgnam9icycpXG4gICAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgICAuZXEoJ2lkJywgZGJJZClcbiAgICAgICAgLm1heWJlU2luZ2xlKCk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZXRyaWV2aW5nIGpvYiBzdGF0dXMgZnJvbSBTdXBhYmFzZTonLCB7XG4gICAgICAgICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICAgICAgICBjb2RlOiBlcnJvci5jb2RlLFxuICAgICAgICAgIGRldGFpbHM6IGVycm9yLmRldGFpbHMsXG4gICAgICAgICAgam9iSWQsXG4gICAgICAgICAgZGJJZCxcbiAgICAgICAgICBhdHRlbXB0OiBhdHRlbXB0cyArIDFcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBhdHRlbXB0cysrO1xuICAgICAgICBpZiAoYXR0ZW1wdHMgPCBtYXhSZXRyaWVzKSB7XG4gICAgICAgICAgLy8gV2FpdCBiZWZvcmUgcmV0cnlpbmcgKGV4cG9uZW50aWFsIGJhY2tvZmYpXG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwMCAqIE1hdGgucG93KDIsIGF0dGVtcHRzKSkpO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBGYWxsIGJhY2sgdG8gaW4tbWVtb3J5IGFmdGVyIGFsbCByZXRyaWVzXG4gICAgICAgIGNvbnNvbGUubG9nKGBBbGwgJHttYXhSZXRyaWVzfSBhdHRlbXB0cyB0byBmZXRjaCBqb2IgZnJvbSBTdXBhYmFzZSBmYWlsZWQsIHVzaW5nIGluLW1lbW9yeSBkYXRhYCk7XG4gICAgICAgIGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN0YXR1czogbWVtb3J5Sm9iLnN0YXR1cyxcbiAgICAgICAgICByZXN1bHQ6IG1lbW9yeUpvYi5yZXN1bHQsXG4gICAgICAgICAgZXJyb3I6IG1lbW9yeUpvYi5lcnJvclxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coYEpvYiAke2pvYklkfSBub3QgZm91bmQgaW4gU3VwYWJhc2UsIHVzaW5nIGluLW1lbW9yeSBkYXRhYCk7XG4gICAgICAgIC8vIE5vdCBmb3VuZCBpbiBEQiBidXQgaW4gbWVtb3J5LCByZXR1cm4gbWVtb3J5IHZlcnNpb25cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdGF0dXM6IG1lbW9yeUpvYi5zdGF0dXMsXG4gICAgICAgICAgcmVzdWx0OiBtZW1vcnlKb2IucmVzdWx0LFxuICAgICAgICAgIGVycm9yOiBtZW1vcnlKb2IuZXJyb3JcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coYFN1Y2Nlc3NmdWxseSByZXRyaWV2ZWQgam9iICR7am9iSWR9IHN0YXR1cyBmcm9tIFN1cGFiYXNlOiAke2RhdGEuc3RhdHVzfWApO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgaW4tbWVtb3J5IHN0b3JlIHRvIGtlZXAgaW4gc3luY1xuICAgICAgaW5NZW1vcnlKb2JzW2pvYklkXSA9IHtcbiAgICAgICAgaWQ6IGpvYklkLFxuICAgICAgICBzdGF0dXM6IGRhdGEuc3RhdHVzLFxuICAgICAgICByZXN1bHQ6IGRhdGEucmVzdWx0LFxuICAgICAgICBlcnJvcjogZGF0YS5lcnJvcixcbiAgICAgICAgY3JlYXRlZF9hdDogZGF0YS5jcmVhdGVkX2F0LFxuICAgICAgICB1cGRhdGVkX2F0OiBkYXRhLnVwZGF0ZWRfYXRcbiAgICAgIH07XG4gICAgICBcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogZGF0YS5zdGF0dXMsXG4gICAgICAgIHJlc3VsdDogZGF0YS5yZXN1bHQsXG4gICAgICAgIGVycm9yOiBkYXRhLmVycm9yXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgIGF0dGVtcHRzKys7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyBqb2Igc3RhdHVzIChhdHRlbXB0ICR7YXR0ZW1wdHN9KTpgLCB7XG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHN0YWNrOiBlcnJvci5zdGFjaz8uc3Vic3RyaW5nKDAsIDIwMCksXG4gICAgICAgIGpvYklkLFxuICAgICAgICBhdHRlbXB0OiBhdHRlbXB0c1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIGlmIChhdHRlbXB0cyA8IG1heFJldHJpZXMpIHtcbiAgICAgICAgLy8gV2FpdCBiZWZvcmUgcmV0cnlpbmcgKGV4cG9uZW50aWFsIGJhY2tvZmYpXG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCA1MDAgKiBNYXRoLnBvdygyLCBhdHRlbXB0cykpKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEFsbCByZXRyaWVzIGZhaWxlZCwgZmFsbCBiYWNrIHRvIGluLW1lbW9yeVxuICAgICAgaGFuZGxlU3VwYWJhc2VFcnJvcihlcnJvcik7XG4gICAgICBjb25zb2xlLmxvZyhgRmFsbGluZyBiYWNrIHRvIGluLW1lbW9yeSBkYXRhIGZvciBqb2IgJHtqb2JJZH0gYWZ0ZXIgJHttYXhSZXRyaWVzfSBmYWlsZWQgU3VwYWJhc2UgYXR0ZW1wdHNgKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN0YXR1czogbWVtb3J5Sm9iLnN0YXR1cyxcbiAgICAgICAgcmVzdWx0OiBtZW1vcnlKb2IucmVzdWx0LFxuICAgICAgICBlcnJvcjogbWVtb3J5Sm9iLmVycm9yXG4gICAgICB9O1xuICAgIH1cbiAgfVxuICBcbiAgLy8gVGhpcyBzaG91bGQgbmV2ZXIgYmUgcmVhY2hlZCBkdWUgdG8gdGhlIHJldHVybnMgaW4gdGhlIGxvb3AsIGJ1dCBUeXBlU2NyaXB0IG5lZWRzIGl0XG4gIGNvbnNvbGUubG9nKGBDb2RlIHJlYWNoZWQgdW5yZWFjaGFibGUgcG9pbnQgaW4gZ2V0Sm9iU3RhdHVzIGZvciBqb2IgJHtqb2JJZH1gKTtcbiAgcmV0dXJuIHtcbiAgICBzdGF0dXM6IG1lbW9yeUpvYi5zdGF0dXMsXG4gICAgcmVzdWx0OiBtZW1vcnlKb2IucmVzdWx0LFxuICAgIGVycm9yOiBtZW1vcnlKb2IuZXJyb3JcbiAgfTtcbn1cblxuLy8gRnVuY3Rpb24gdG8gY3JlYXRlIGEgbmV3IGpvYlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUpvYihqb2JJZDogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XG4gIC8vIEdldCBhIERCLWNvbXBhdGlibGUgSURcbiAgY29uc3QgZGJJZCA9IGdldERiQ29tcGF0aWJsZUlkKGpvYklkKTtcbiAgXG4gIGNvbnNvbGUubG9nKGBDcmVhdGluZyBqb2IgJHtqb2JJZH0gKERCIElEOiAke2RiSWR9KWApO1xuICBcbiAgLy8gQWx3YXlzIGNyZWF0ZSB0aGUgam9iIGluIG1lbW9yeSBmaXJzdCBmb3IgcmVkdW5kYW5jeVxuICBpbk1lbW9yeUpvYnNbam9iSWRdID0ge1xuICAgIGlkOiBqb2JJZCxcbiAgICBzdGF0dXM6ICdxdWV1ZWQnLFxuICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICB9O1xuICBjb25zb2xlLmxvZyhgSm9iICR7am9iSWR9IGNyZWF0ZWQgaW4gbWVtb3J5YCk7XG4gIFxuICAvLyBJZiBTdXBhYmFzZSBpcyBkaXNhYmxlZCwganVzdCByZXR1cm4gc3VjY2VzcyBmcm9tIGluLW1lbW9yeSBzdG9yYWdlXG4gIGlmICghc2hvdWxkVXNlU3VwYWJhc2UoKSkge1xuICAgIGNvbnNvbGUubG9nKGBVc2luZyBpbi1tZW1vcnkgc3RvcmFnZSBvbmx5IGZvciBqb2IgJHtqb2JJZH1gKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZyhgSW5zZXJ0aW5nIGpvYiAke2pvYklkfSBpbnRvIFN1cGFiYXNlYCk7XG4gICAgXG4gICAgLy8gVHJ5IHRvIGluc2VydCB0aGUgam9iIGludG8gU3VwYWJhc2VcbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ2pvYnMnKVxuICAgICAgLmluc2VydCh7XG4gICAgICAgIGlkOiBkYklkLFxuICAgICAgICBzdGF0dXM6ICdxdWV1ZWQnLFxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgfSk7XG4gICAgXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBjcmVhdGluZyBqb2IgJHtqb2JJZH0gaW4gU3VwYWJhc2U6YCwge1xuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxuICAgICAgICBjb2RlOiBlcnJvci5jb2RlLFxuICAgICAgICBkZXRhaWxzOiBlcnJvci5kZXRhaWxzXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gRm9yIGNvbmZsaWN0cywgdGhlIGpvYiBtaWdodCBhbHJlYWR5IGV4aXN0XG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJzIzNTA1Jykge1xuICAgICAgICBjb25zb2xlLmxvZyhgSm9iICR7am9iSWR9IGFscmVhZHkgZXhpc3RzIGluIFN1cGFiYXNlLCB1cGRhdGluZyBzdGF0dXMgaW5zdGVhZGApO1xuICAgICAgICBcbiAgICAgICAgLy8gVHJ5IHRvIHVwZGF0ZSB0aGUgam9iIGluc3RlYWRcbiAgICAgICAgY29uc3QgeyBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ2pvYnMnKVxuICAgICAgICAgIC51cGRhdGUoe1xuICAgICAgICAgICAgc3RhdHVzOiAncXVldWVkJyxcbiAgICAgICAgICAgIHVwZGF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmVxKCdpZCcsIGRiSWQpO1xuICAgICAgICBcbiAgICAgICAgaWYgKHVwZGF0ZUVycm9yKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgdXBkYXRpbmcgZXhpc3Rpbmcgam9iICR7am9iSWR9IGluIFN1cGFiYXNlOmAsIHVwZGF0ZUVycm9yKTtcbiAgICAgICAgICAvLyBFdmVuIGlmIHVwZGF0ZSBmYWlscywgd2UgaGF2ZSB0aGUgam9iIGluIG1lbW9yeVxuICAgICAgICAgIGhhbmRsZVN1cGFiYXNlRXJyb3IodXBkYXRlRXJyb3IpO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBTdWNjZXNzZnVsbHkgdXBkYXRlZCBqb2IgJHtqb2JJZH0gaW4gU3VwYWJhc2VgKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBGb3IgZm9yZWlnbiBrZXkgY29uc3RyYWludCBmYWlsdXJlcywgdHJ5IHRvIGNyZWF0ZSB3aXRoIG1pbmltYWwgZmllbGRzXG4gICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJzIzNTAzJykge1xuICAgICAgICBjb25zb2xlLmxvZyhgVHJ5aW5nIHNpbXBsaWZpZWQgam9iIGNyZWF0aW9uIGZvciAke2pvYklkfWApO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgeyBlcnJvcjogc2ltcGxlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgLmZyb20oJ2pvYnMnKVxuICAgICAgICAgIC5pbnNlcnQoe1xuICAgICAgICAgICAgaWQ6IGRiSWQsXG4gICAgICAgICAgICBzdGF0dXM6ICdxdWV1ZWQnXG4gICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoc2ltcGxlRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBTaW1wbGlmaWVkIGpvYiBjcmVhdGlvbiBhbHNvIGZhaWxlZCBmb3IgJHtqb2JJZH06YCwgc2ltcGxlRXJyb3IpO1xuICAgICAgICAgIGhhbmRsZVN1cGFiYXNlRXJyb3Ioc2ltcGxlRXJyb3IpO1xuICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBTdGlsbCByZXR1cm4gdHJ1ZSBzaW5jZSB3ZSBoYXZlIGluLW1lbW9yeSBiYWNrdXBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgU2ltcGxpZmllZCBqb2IgY3JlYXRpb24gc3VjY2VlZGVkIGZvciAke2pvYklkfWApO1xuICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEZvciBvdGhlciBlcnJvcnMsIGhhbmRsZSBncmFjZWZ1bGx5IGFuZCB1c2UgaW4tbWVtb3J5IHN0b3JhZ2UgYXMgZmFsbGJhY2tcbiAgICAgIGhhbmRsZVN1cGFiYXNlRXJyb3IoZXJyb3IpO1xuICAgICAgcmV0dXJuIHRydWU7IC8vIFN0aWxsIHJldHVybiB0cnVlIHNpbmNlIHdlIGhhdmUgaW4tbWVtb3J5IGJhY2t1cFxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhgU3VjY2Vzc2Z1bGx5IGNyZWF0ZWQgam9iICR7am9iSWR9IGluIFN1cGFiYXNlYCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFeGNlcHRpb24gd2hpbGUgY3JlYXRpbmcgam9iICR7am9iSWR9OmAsIHtcbiAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICBzdGFjazogZXJyb3Iuc3RhY2s/LnN1YnN0cmluZygwLCAyMDApXG4gICAgfSk7XG4gICAgXG4gICAgLy8gSW4gY2FzZSBvZiBuZXR3b3JrIG9yIG90aGVyIGV4Y2VwdGlvbiwgd2UgYWxyZWFkeSBoYXZlIHRoZSBqb2IgaW4gbWVtb3J5XG4gICAgaGFuZGxlU3VwYWJhc2VFcnJvcihlcnJvcik7XG4gICAgcmV0dXJuIHRydWU7IC8vIFN0aWxsIHJldHVybiB0cnVlIHNpbmNlIHdlIGhhdmUgaW4tbWVtb3J5IGJhY2t1cFxuICB9XG59ICJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJjb25zb2xlIiwibG9nIiwiaGFzUHJvY2Vzc0VudiIsInByb2Nlc3MiLCJlbnYiLCJub2RlRW52IiwiaGFzU2JVcmwiLCJoYXNTYktleSIsIm5leHRDb25maWciLCJORVhUX0NPTkZJR19BVkFJTEFCTEUiLCJlbnZWYXJDb3VudCIsIk9iamVjdCIsImtleXMiLCJmaWx0ZXIiLCJrZXkiLCJzdGFydHNXaXRoIiwibGVuZ3RoIiwic3VwYWJhc2VVcmwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1YnN0cmluZyIsImhhc1VybCIsIkJvb2xlYW4iLCJ1cmxMZW5ndGgiLCJ1cmxQcmVmaXgiLCJoYXNLZXkiLCJrZXlMZW5ndGgiLCJrZXlQcmVmaXgiLCJpc1N1cGFiYXNlQ29uZmlndXJlZCIsInN1cGFiYXNlRGlzYWJsZWQiLCJzdXBhYmFzZSIsImF1dGgiLCJwZXJzaXN0U2Vzc2lvbiIsImF1dG9SZWZyZXNoVG9rZW4iLCJnbG9iYWwiLCJoZWFkZXJzIiwiZGIiLCJzY2hlbWEiLCJ2ZXJpZnlTdXBhYmFzZUNvbm5lY3Rpb24iLCJjYXRjaCIsImVyciIsIndhcm4iLCJtZXNzYWdlIiwiaW5NZW1vcnlKb2JzIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsImxpbWl0IiwiY29kZSIsImVuc3VyZUpvYnNUYWJsZUV4aXN0cyIsImRldGFpbHMiLCJjaGVja1RhYmxlU3RydWN0dXJlIiwic3RhY2siLCJpbmNsdWRlcyIsIlR5cGVFcnJvciIsInNhbXBsZURhdGEiLCJmaXJzdFJvdyIsImpvaW4iLCJjcmVhdGVUYWJsZVNRTCIsImNyZWF0ZUVycm9yIiwicnBjIiwic3FsIiwiaW5zZXJ0RXJyb3IiLCJpbnNlcnQiLCJpZCIsInN0YXR1cyIsInJlc3VsdCIsImNyZWF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ1cGRhdGVkX2F0IiwiZGVsZXRlIiwiZXEiLCJzcWxFcnJvciIsImdldERiQ29tcGF0aWJsZUlkIiwiaXNOYU4iLCJOdW1iZXIiLCJ0aW1lc3RhbXBNYXRjaCIsIm1hdGNoIiwiaGFzaCIsInByaW1lIiwiaSIsImNoYXIiLCJjaGFyQ29kZUF0IiwiTWF0aCIsImltdWwiLCJhYnMiLCJzaG91bGRVc2VTdXBhYmFzZSIsImhhbmRsZVN1cGFiYXNlRXJyb3IiLCJuYW1lIiwiaGludCIsImlzVHlwZUVycm9yIiwidXBkYXRlSm9iU3RhdHVzIiwiam9iSWQiLCJtZW1vcnlKb2IiLCJ1bmRlZmluZWQiLCJkYklkIiwic2FmZVJlc3VsdCIsIml0aW5lcmFyeSIsImRheXMiLCJoYXNDb29yZGluYXRlSXNzdWVzIiwiZGF5IiwiYWN0aXZpdGllcyIsIkFycmF5IiwiaXNBcnJheSIsImoiLCJhY3Rpdml0eSIsImNvb3JkaW5hdGVzIiwidGl0bGUiLCJsYXQiLCJsbmciLCJKU09OIiwic3RyaW5naWZ5IiwiZSIsImV4aXN0aW5nSm9iIiwic2luZ2xlIiwidXBzZXJ0Iiwib25Db25mbGljdCIsImdldEpvYlN0YXR1cyIsIm1heWJlU2luZ2xlIiwibWF4UmV0cmllcyIsImF0dGVtcHRzIiwiYXR0ZW1wdCIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsInBvdyIsImNyZWF0ZUpvYiIsInVwZGF0ZUVycm9yIiwidXBkYXRlIiwic2ltcGxlRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fjob-status%2Froute&page=%2Fapi%2Fjob-status%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fjob-status%2Froute.ts&appDir=%2FUsers%2Fethanhoppe%2FDesktop%2FAItravelagent%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fethanhoppe%2FDesktop%2FAItravelagent&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();